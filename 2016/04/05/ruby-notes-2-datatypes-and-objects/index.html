<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>Ruby Notes 2 Datatypes and Objects</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2016/04/05/ruby-notes-2-datatypes-and-objects/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?qqbuby" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Ruby Notes 2 Datatypes and Objects</h1>
    
    
    <p class="post-meta"><time datetime="2016-04-05T01:44:27+08:00" itemprop="datePublished">Apr 5, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <ol>
  <li>
    <p>Numbers</p>

    <p>Ruby includes five built-in classes for representing numbers, and standard library includes three more numeric classes.</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">Numeric</code></p>

        <ul>
          <li>
            <p><code class="language-plaintext highlighter-rouge">Integer</code></p>

            <ul>
              <li>
                <p><code class="language-plaintext highlighter-rouge">Fixnum</code></p>
              </li>
              <li>
                <p><code class="language-plaintext highlighter-rouge">Bignum</code></p>
              </li>
            </ul>
          </li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">Float</code></p>
          </li>
          <li><code class="language-plaintext highlighter-rouge">Complex</code> (standard library)</li>
          <li><code class="language-plaintext highlighter-rouge">BigDecimal</code> (standard library)</li>
          <li><code class="language-plaintext highlighter-rouge">Rational</code> (standard library)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Text</p>

    <p>Text is represented in Ruby by objects of the <code class="language-plaintext highlighter-rouge">String</code> class.</p>

    <ul>
      <li>
        <p><strong>Single-quoted string literals</strong></p>

        <p>In single-quoted strings, a backslash is not special if the character that follows it is anything other than a quote or a backslash.</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &gt; 'a\b' == 'a\\b'
  =&gt; true
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>Double-quoted string literals</strong></p>

        <p>Double-quoted literals support quite a few backslash escape sequences, such as <code class="language-plaintext highlighter-rouge">\n</code> for newline, <code class="language-plaintext highlighter-rouge">\t</code> for tab, and <code class="language-plaintext highlighter-rouge">\"</code> for a quotation mark.</p>

        <ul>
          <li>
            <p><strong>String Interpolation</strong></p>

            <p>Double-quoted literals may also inlcude arbitrary Ruby expression that begin with the <code class="language-plaintext highlighter-rouge">#</code> character and are enclosed within curly braces:</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  "360 degrees=#{2*Math::PI} radians" # "360 degrees=6.28318530717959 radians"
</code></pre></div>            </div>

            <p>When the expression to be interpolated into the string literal is simply a reference to a global, instance, or class variable, then the curly braces may be omitted:</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $salutation = 'hello' # Define a global variable 
  "#$salutation world" # Use it in a double-quoted string
</code></pre></div>            </div>

            <p>Use a backslash to escape the # character if you do not want it to be treated specially. Note that this only needs to be done if the character after # is {, $, or @:</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  "My phone #: 555-1234" # No escape needed
  "Use \#{ to interpolate expressions" # Escape #{ with backslash
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>Unicode escapes</strong></p>

        <p>In Ruby 1.9, double-quoted strings can include arbitrary Unicode characters with <code class="language-plaintext highlighter-rouge">\u</code> escapes.</p>

        <p>Strings that use the <code class="language-plaintext highlighter-rouge">\u</code> escape are encoded uisng the Unicode <strong><em>UTF-8</em></strong> encoding.</p>

        <ol>
          <li>
            <p><code class="language-plaintext highlighter-rouge">\u</code></p>

            <p>In its simplest form, <code class="language-plaintext highlighter-rouge">\u</code> is followed by exactly four hexadecimal digits (letters can be upper- or lowercase), which represent a Unicode codepoint between 0000 and FFFF.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "\u00D7" # =&gt; "×": leading zeros cannot be droppe
  "\u20ac" # =&gt; "€": lowercase letters are okay
</code></pre></div>            </div>
          </li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">u{}</code></p>

            <p>A second form of the <code class="language-plaintext highlighter-rouge">\u</code> escape is followed by an open curly brace, one to six hexadecimal digits, and a close curly brace.</p>

            <p>The digits between the braces can represent any Unicode codepoint between 0 and 10FFFF.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "\u{A5}" # =&gt; "¥": same as "\u00A5"
 "\u{3C0}" # Greek lowercase pi: same as "\u03C0" 
 "\u{10ffff}" # The largest Unicode codepoint
</code></pre></div>            </div>

            <p>The <code class="language-plaintext highlighter-rouge">\u{}</code> form of this escape allow multiple codepoints to be embedded within a single escape.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> money = "\u{20AC 20 A3 20 A5}" # =&gt; "€ £ ¥"
</code></pre></div>            </div>
          </li>
        </ol>
      </li>
      <li>
        <p><strong>String Opertors</strong></p>

        <p><code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">&lt;&lt;</code>, <code class="language-plaintext highlighter-rouge">*</code>,<code class="language-plaintext highlighter-rouge">==</code>,<code class="language-plaintext highlighter-rouge">!=</code>,<code class="language-plaintext highlighter-rouge">&lt;</code>,<code class="language-plaintext highlighter-rouge">&lt;=</code>,<code class="language-plaintext highlighter-rouge">&gt;</code>,<code class="language-plaintext highlighter-rouge">&gt;=</code>,<code class="language-plaintext highlighter-rouge">[]</code></p>

        <p><code class="language-plaintext highlighter-rouge">casecmp</code>,<code class="language-plaintext highlighter-rouge">downcase</code>,<code class="language-plaintext highlighter-rouge">upcase</code>,<code class="language-plaintext highlighter-rouge">each_byte</code>,<code class="language-plaintext highlighter-rouge">each_char</code>,<code class="language-plaintext highlighter-rouge">each_line</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Arrays</p>

    <p>An <strong>array</strong> is a sequence of values that allows values to be accessed by their position, or index, in the sequence.</p>

    <p>In Ruby, the first value in an array has index 0.</p>

    <p>The <code class="language-plaintext highlighter-rouge">size</code> and <code class="language-plaintext highlighter-rouge">length</code> methods return the number of elements in an array.</p>

    <p>The last element of the array is at index size-1.</p>

    <p>Negative index values count from the end of the array, so the last element of an array can also be accessed with an index of –1 The second-to-last has an index of –2, and so on</p>

    <p>If you attempt to read an element beyond the end of an array (with an index &gt;= size) or before the beginning of an array (with an index &lt; -size), Ruby simply returns <code class="language-plaintext highlighter-rouge">nil</code> and does <em>not</em> throw an exception.</p>

    <p><code class="language-plaintext highlighter-rouge">+</code>,<code class="language-plaintext highlighter-rouge">-</code>,<code class="language-plaintext highlighter-rouge">&lt;&lt;</code>,<code class="language-plaintext highlighter-rouge">|</code>,’&amp;`</p>

    <p><code class="language-plaintext highlighter-rouge">clear</code>,<code class="language-plaintext highlighter-rouge">each_index</code>,<code class="language-plaintext highlighter-rouge">empty?</code>,<code class="language-plaintext highlighter-rouge">sort</code>,<code class="language-plaintext highlighter-rouge">sort!</code>,<code class="language-plaintext highlighter-rouge">include?</code></p>
  </li>
  <li>
    <p>Hashes</p>

    <p>A <strong>hash</strong> (a.k.a <strong>maps</strong>, <strong>associative arrays</strong>) is a data struture that maintains a set of objects known as <em>keys</em>, and associates a value with each key.</p>

    <ul>
      <li>
        <p><strong>Hash Literals</strong></p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  numbers = { "one" =&gt; 1, "two" =&gt; 2, "three" =&gt; 3 }
  numbers = { :one =&gt; 1, :two =&gt; 2, :three =&gt; 3 }
  numbers = { :one, 1, :two, 2, :three, 3 } # (Deprecated!) Same, but harder to read
  numbers = { :one =&gt; 1, :two =&gt; 2, } # Extra comma ignored
  numbers = { one: 1, two: 2, three: 3 } # Ruby 1.9+
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Ranges</p>

    <p>A <strong>Range</strong> object represents the values between a start value and an end value.</p>

    <p>Range literals are written by placing two or three dots between the start and end value.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1..10       # The integers 1 through 10, including 10
 1.0...10.0  # The numbers between 1.0 and 10.0, excluding 10.0 itself.
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">member?</code>,<code class="language-plaintext highlighter-rouge">include?</code>,<code class="language-plaintext highlighter-rouge">to_a</code>,<code class="language-plaintext highlighter-rouge">===</code></p>
  </li>
  <li>
    <p>Symbols</p>

    <p>Symbols are immutable interned strings, written as colon-prefixed identifiers.</p>
  </li>
  <li>
    <p>True, False, and Nil</p>

    <p><strong>true</strong> and <strong>false</strong> are the two Boolean values, and they represent truth and falsehood, yes and no, on and off.</p>

    <p><strong>nil</strong> is a special value reseved to indicate the absence of value.</p>

    <p>TrueClass-&gt;true, FalseClass-&gt;flase, NilClass-&gt;nil.</p>

    <p>Note that <strong>true</strong>, <strong>false</strong>, and <strong>nil</strong> refer to objects, not numbers.</p>

    <p><strong>false</strong> and <strong>nil</strong> are not the same thing as 0, and <strong>true</strong> is not the same thing as 1.</p>

    <p>When Ruby requires a Boolean value, <strong>nil</strong> behaves like <strong>false</strong>, and any value other than <strong>nil</strong> or <strong>false</strong> behaves like <strong>true</strong>.</p>
  </li>
  <li>
    <p>Objects</p>

    <p>Ruby is a very pure object-oriented language: all values are objects, and there is no distinction between primitive types and object types as there are in many other languages.</p>

    <p>In Ruby, all objects inherit from a class named <strong>Object</strong> (BasicObject?) and share the methods defined by that class.</p>

    <ul>
      <li>
        <p><strong>Object References</strong></p>

        <p>When we work with objects in Ruby, we are really working with object <strong><em>references</em></strong>.</p>

        <p>When we assign a vlaue to a variable, we are not copying an object “into” that variable; we are merely storing a reference to an object into that variable.</p>

        <p>In Ruby, method arguments are passed by value rather than by reference, but that the values passed are object references.</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  s = "Ruby"      # Create a String object. Store a reference to it in s.
  t = s           # Copy the reference to t. s and t both refer to the same object. 
  t[-1] = ""      # Modify the object through the reference in t.
  print s         # Access the modified object through s. Prints "Rub".
  t = "Java"      # t now refers to a different object.
  print s,t       # Prints "RubJava".
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>Object Lifetime</strong></p>

        <p>The <code class="language-plaintext highlighter-rouge">new</code> and <code class="language-plaintext highlighter-rouge">initialze</code> methods provide the default technique for creating new classes, but classes may aslo define other methods, known as “factory methods”.</p>

        <p>Ruby uses a technique called garbage collection to automatically destroy objects that are no longer needed.</p>

        <p>An object becomes a candidate for garbage collection when it is unreachable—when there are no remaining references to the object except from other unreachable objects.</p>

        <p>But garbage collection does <em>not</em> mean that <em>memory leaks</em> are impossible: any code that creates long-lived references to objects that would otherwise be short-lived can be a source of memory leaks.</p>
      </li>
      <li>
        <p><strong>Object Identify</strong></p>

        <p>Every object has an object identifier, a <strong>Fixnum</strong>, that you can obtain with the <code class="language-plaintext highlighter-rouge">object_id</code> method.</p>

        <p>The value returned by this method is constant and unique for the life of the object.</p>

        <p>The method <code class="language-plaintext highlighter-rouge">id</code> is a <em>deprecated</em> synonym for <code class="language-plaintext highlighter-rouge">object_id</code>.</p>

        <p><code class="language-plaintext highlighter-rouge">__id__</code> is a valid synonym for <code class="language-plaintext highlighter-rouge">object_id</code>. It exists as a fallback, so you can access an object’s ID even if the <code class="language-plaintext highlighter-rouge">object_id</code> method has been undefined or overridden.</p>

        <p>The <code class="language-plaintext highlighter-rouge">Object</code> class implements the <code class="language-plaintext highlighter-rouge">hash</code> method to simply return an object’s ID.</p>
      </li>
      <li>
        <p><strong>Object Class and Object Type</strong></p>

        <ol>
          <li>
            <p>Determine the class of an object</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> o = "test"                      # This is a value
 o.class                       # String: o is a String object
 o.class.superclass            # Object: superclass of String is Object
 o.class.superclass.superclass # nil: Object has no superclass
</code></pre></div>            </div>

            <p>In Ruby 1.9, <code class="language-plaintext highlighter-rouge">Object</code> is no longer the true root of the class hierachy.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> # Ruby 1.9 only
 Object.superclass
 BasicObject.superclass
</code></pre></div>            </div>
          </li>
          <li>
            <p>Check the class of an object</p>

            <ul>
              <li>
                <p><code class="language-plaintext highlighter-rouge">==</code></p>

                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  o.class == String       # true if o is a String
</code></pre></div>                </div>
              </li>
              <li>
                <p><code class="language-plaintext highlighter-rouge">instance_of?</code> method</p>

                <p>*The <code class="language-plaintext highlighter-rouge">instance_of?</code> method does the same thing and is a litte more elegant than <code class="language-plaintext highlighter-rouge">==</code>.</p>

                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  o.instance_of? String   # true if o is a String
</code></pre></div>                </div>
              </li>
              <li>
                <p><code class="language-plaintext highlighter-rouge">is_a?</code> and <code class="language-plaintext highlighter-rouge">kind_of?</code></p>

                <p><em>Use the <code class="language-plaintext highlighter-rouge">is_a?</code> method, or its synonym <code class="language-plaintext highlighter-rouge">kind_of?</code> to test if an object is an instance of any subclass of that class.</em></p>

                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  x = 1                  # This is the value we're working with
  x.instance_of? Fixnum  # true: is an instance of Fixnum
  x.instance_of? Numeric # false: instance_of? doesn't check inheritance
  x.is_a? Fixnum         # true: x is a Fixnum
  x.is_a? Integer        # true: x is an Integer
  x.is_a? Numeric        # true: x is a Numeric
  x.is_a? Comparable     # true: works with mixin modules, too
  x.is_a? Object         # true for any value of x
</code></pre></div>                </div>

                <p><em>The <code class="language-plaintext highlighter-rouge">Class</code> class defines the <code class="language-plaintext highlighter-rouge">===</code> operator in such a way that it can used in place of <code class="language-plaintext highlighter-rouge">is_a?</code> but is probaly less readable.</em></p>

                <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Numeric === x          # true: x is_a Numeric
</code></pre></div>                </div>
              </li>
            </ul>
          </li>
          <li>
            <p>Ducking Type</p>

            <p>Every object has a well-defined class in Ruby, and that class never changes during the lifetime of the object.</p>

            <p>The type of an object is related to its class, but the class is only part of an object’s type.</p>

            <p>The type of an object is the set of methods it can it can respond to.</p>

            <p>In Ruby, we often don’t care about the class of an object, we just want to know whether we can invoke some method on it.</p>

            <p>Focusing on types rather than classes leads to a programming style known in Ruby as “ducking typing”.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> o.respond_to? :"&lt;&lt;"    # true if o has an &lt;&lt; operator
</code></pre></div>            </div>
          </li>
        </ol>
      </li>
      <li>
        <p><strong>Object Equality</strong></p>

        <ol>
          <li>
            <p>The <code class="language-plaintext highlighter-rouge">equal?</code> method</p>

            <p>The <code class="language-plaintext highlighter-rouge">equal?</code> method is defined by <code class="language-plaintext highlighter-rouge">Object</code> to test whether two values refer to exactly the same object.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> a.object_id == b.object_id # Works like a.equal?(b)
</code></pre></div>            </div>
          </li>
          <li>
            <p>The <code class="language-plaintext highlighter-rouge">==</code> operator</p>

            <p>The <code class="language-plaintext highlighter-rouge">==</code> operator is the most common way to test for equality. In <code class="language-plaintext highlighter-rouge">Object</code> class, it simply a synonym for <code class="language-plaintext highlighter-rouge">equal?</code>, and it tests whether two objet references are identical.</p>

            <p>Most classes <em>redefine</em> this operator to allow distinct instances to be tested for equality:</p>

            <p>a = “Ruby”  # One String object
 b = “Ruby”  # A different String object with the same content
 a.equal?(b) # false: a and b do not refer to the same object
 a == b      # true: but these two distinct objects have equal values</p>

            <p><strong><em>Equality for Java Programmers: Ruby’s convention is just about the opposite of Java’s.</em></strong></p>
          </li>
          <li>
            <p>The <code class="language-plaintext highlighter-rouge">===</code> operator</p>

            <p>The <code class="language-plaintext highlighter-rouge">===</code> operator is commonly called the “case equality” operator and is used to test whether the target value of a <code class="language-plaintext highlighter-rouge">case</code> statement matches any of the when clauses of that statement.</p>

            <p><code class="language-plaintext highlighter-rouge">Range</code> defines <code class="language-plaintext highlighter-rouge">===</code> to test whether a value falls within the range.</p>

            <p><code class="language-plaintext highlighter-rouge">Regexp</code> defines <code class="language-plaintext highlighter-rouge">===</code> to test whether a string matches the regular expression.</p>

            <p><code class="language-plaintext highlighter-rouge">Class</code> defines <code class="language-plaintext highlighter-rouge">===</code> to test whether an object is an instance of that class.</p>

            <p>In Ruby 1.9, <code class="language-plaintext highlighter-rouge">Symbol</code> defines <code class="language-plaintext highlighter-rouge">===</code> to return true if the righthand operand is the same symbol as the left or if it is a string holding the same text.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> (1..10) === 5       # true: 5 is in the range 1..10
 /\d+/ === "123"     # true: the string matches the regular expression
 String === "s"      # true: "s" is an instance of the class String 
 :s === "s"          # true in Ruby 1.9
</code></pre></div>            </div>
          </li>
        </ol>
      </li>
      <li>
        <p><strong>Object Order</strong></p>

        <ul>
          <li>
            <p><code class="language-plaintext highlighter-rouge">&lt;=&gt;</code></p>

            <p>In Ruby, classes define an ordering by implementing the <code class="language-plaintext highlighter-rouge">&lt;=&gt;</code> operator.</p>

            <p><code class="language-plaintext highlighter-rouge">-1: less than</code>, <code class="language-plaintext highlighter-rouge">0: equal</code>, <code class="language-plaintext highlighter-rouge">1: greater than</code>, <code class="language-plaintext highlighter-rouge">nil: cannot be meaningfully compared</code></p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  1 &lt;=&gt; 5     # -1
  5 &lt;=&gt; 5     # 0
  9 &lt;=&gt; 5     # 1
  "1" &lt;=&gt; 5   # nil: integers and strings are not comparable
</code></pre></div>            </div>
          </li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">Comparable</code> module as a mixin</p>

            <p>The <code class="language-plaintext highlighter-rouge">&lt;=&gt;</code> operator is all that is needed to compare values. But it isn’t particularly intuitive.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt; Less than
  &lt;= Less than or equal
  == Equal
  &gt;= Greater than or equal
  &gt; Greater than
</code></pre></div>            </div>

            <p><code class="language-plaintext highlighter-rouge">Comparable</code> also defines a useful comparison method named <code class="language-plaintext highlighter-rouge">between?</code>:</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  1.between?(0,10)    # true: 0 &lt;= 1 &lt;= 10
</code></pre></div>            </div>

            <p>If the <code class="language-plaintext highlighter-rouge">&lt;=&gt;</code> operator return <code class="language-plaintext highlighter-rouge">nil</code>, all the comparision operators dervided from it return <code class="language-plaintext highlighter-rouge">false</code>.</p>

            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  nan = 0.0/0.0;              # zero divided by zero is not-a-number
  nan &lt; 0                     # false: it is not less than zero
  nan &gt; 0                     # false: it is not greater than zero
  nan == 0                    # false: it is not equal to zero
  nan == nan                  # false: it is not even equal to itself!
  nan.equal?(nan)             # this is true, of course
</code></pre></div>            </div>

            <p><em>Note that defining <code class="language-plaintext highlighter-rouge">&lt;=&gt;</code> and including the <code class="language-plaintext highlighter-rouge">Comparable</code> module defines a <code class="language-plaintext highlighter-rouge">==</code> operator for your class.</em></p>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>Object Conversion</strong></p>

        <ul>
          <li>
            <p>Explicit conversions</p>

            <p>Classes define explicit conversion methods for use by application code that needs to convert a value to another representation.</p>

            <p><code class="language-plaintext highlighter-rouge">to_s</code>, <code class="language-plaintext highlighter-rouge">to_i</code>, <code class="language-plaintext highlighter-rouge">to_f</code>, and <code class="language-plaintext highlighter-rouge">to_a</code> to convert to <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">Integer</code>, <code class="language-plaintext highlighter-rouge">Float</code>,  and <code class="language-plaintext highlighter-rouge">Array</code>.</p>

            <p>Built-in methods do not typically invoke these methods for you.</p>

            <ul>
              <li>
                <p><code class="language-plaintext highlighter-rouge">to_s</code> and <code class="language-plaintext highlighter-rouge">inspect</code></p>

                <p><code class="language-plaintext highlighter-rouge">to_s</code> is generally intended to return a human-readable representation of the object, suitalbe for end users.</p>

                <p><code class="language-plaintext highlighter-rouge">inspect</code> is tended for debugging use, and should return a representation that is helpful to Ruby developers.</p>

                <p>The default <code class="language-plaintext highlighter-rouge">inspect</code> method, inherited from <code class="language-plaintext highlighter-rouge">Object</code>, simply call <code class="language-plaintext highlighter-rouge">to_s</code>.</p>
              </li>
            </ul>
          </li>
          <li>
            <p>Implicit conversions</p>

            <p>Sometimes a class has strong characteristics of some other class.</p>

            <p><code class="language-plaintext highlighter-rouge">to_str</code>, <code class="language-plaintext highlighter-rouge">to_int</code>, <code class="language-plaintext highlighter-rouge">to_ary</code>, <code class="language-plaintext highlighter-rouge">to_hash</code>, <code class="language-plaintext highlighter-rouge">try_convert</code></p>
          </li>
          <li>
            <p>Conversion functions</p>

            <p>The <code class="language-plaintext highlighter-rouge">Kernel</code> module defines four conversion methods that behave as global conversion functions.</p>

            <p><code class="language-plaintext highlighter-rouge">Array</code>, <code class="language-plaintext highlighter-rouge">Float</code>, <code class="language-plaintext highlighter-rouge">Integer</code>, <code class="language-plaintext highlighter-rouge">String</code></p>
          </li>
          <li>
            <p>Arithmetic operator type coercions</p>

            <p><code class="language-plaintext highlighter-rouge">Numeric</code> types define a conversoin method named <code class="language-plaintext highlighter-rouge">coerce</code> to convert the argument to the same type as the numeric object on which the method is invoked, or to convert both objects to some more general compatible type.</p>

            <p>The <code class="language-plaintext highlighter-rouge">coecre</code> method always returns an array that holds two numeric values of the same type.</p>
          </li>
          <li>
            <p>Boolean type convrsion</p>

            <p><code class="language-plaintext highlighter-rouge">to_b</code></p>

            <p>There are no implicit conversions that convert other values to <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>.</p>

            <p>Ruby’s Boolean operators and its conditional and looping constructs that use <code class="language-plaintext highlighter-rouge">Boolean expressions</code> can work with values other than <code class="language-plaintext highlighter-rouge">true</code> and <code class="language-plaintext highlighter-rouge">false</code>.</p>

            <p>In <code class="language-plaintext highlighter-rouge">Boolean expressions</code>, any value other than <code class="language-plaintext highlighter-rouge">false</code> or <code class="language-plaintext highlighter-rouge">nil</code> behaves like (but is not converted to) <code class="language-plaintext highlighter-rouge">true</code>. <code class="language-plaintext highlighter-rouge">nil</code>, on the other hand behaves like <code class="language-plaintext highlighter-rouge">false</code>.</p>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>Copying Objects</strong></p>

        <ul>
          <li>
            <p><code class="language-plaintext highlighter-rouge">clone</code>, <code class="language-plaintext highlighter-rouge">dup</code></p>

            <p>The <code class="language-plaintext highlighter-rouge">Object</code> class defines two closely related methods <code class="language-plaintext highlighter-rouge">clone</code> and <code class="language-plaintext highlighter-rouge">dup</code> for copying objects.</p>

            <p>If copied object includes one internal state that refers to other objects, only the object references are copied, not the referenced objects themselves.</p>

            <ul>
              <li>
                <p><code class="language-plaintext highlighter-rouge">clone</code> copies both the frozen and tainted state of an object, whereas <code class="language-plaintext highlighter-rouge">dup</code> only copies the tainted state; calling <code class="language-plaintext highlighter-rouge">dup</code> on a frozen object returns an unfrozen copy.</p>
              </li>
              <li>
                <p><code class="language-plaintext highlighter-rouge">clone</code> copies any singleton methods of the object, whereas <code class="language-plaintext highlighter-rouge">dup</code> does not.</p>
              </li>
            </ul>
          </li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">initialize_copy</code></p>

            <p><code class="language-plaintext highlighter-rouge">initialize_copy</code> method could recursively copy the internal data of an object so the resulting object is not a simple shallow copy of the original.</p>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>Marshaling Objects</strong></p>

        <p><code class="language-plaintext highlighter-rouge">Mrshal.dump</code>,<code class="language-plaintext highlighter-rouge">Marshal.load</code></p>
      </li>
      <li>
        <p><strong>Freezing Objects</strong></p>

        <p>Any object may be <em>frozen</em> by calling its <code class="language-plaintext highlighter-rouge">freeze</code> method.</p>

        <p>A frozen object becomes immutable.</p>

        <p>Freezing a class object prevents the addition of any methods to the class.</p>

        <p>Once frozen, there is no way to “thaw” an object.</p>

        <p>If you copy a frozen object with <code class="language-plaintext highlighter-rouge">clone</code>, the copy will also be frozen.</p>

        <p>If you copy a frozen object with <code class="language-plaintext highlighter-rouge">dup</code>, however, the copy will not frozen.</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  s = "ice"     # Strings are mutable objects
  s.freeze      # Make this string immutable
  s.frozen ?    # true: it has been frozen
  s.upcase!     # TypeError: can't modify frozen string 
  s[0] = "ni"   # TypeError: can't modify frozen string
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>Tainting Objects</strong></p>

        <p><code class="language-plaintext highlighter-rouge">taint</code>, <code class="language-plaintext highlighter-rouge">untaint</code>, <code class="language-plaintext highlighter-rouge">$$SAFE</code></p>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h4 id="references">References</h4>

<ul>
  <li><a href="http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177/ref=sr_1_1?ie=UTF8&amp;qid=1459784613&amp;sr=8-1&amp;keywords=The+Ruby+Programming+Language">The Ruby Programming Language by David Flanagan and Yukihiro Matsumoto</a></li>
</ul>

  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2016/04/04/ruby-notes-1-overview/">&laquo; Ruby Notes 1 Overview</a>
      
    </li>
    <li>
      
      <a href="/2016/04/05/ruby-notes-3-expression-and-operators/">Ruby Notes 3 Expression and Operators &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>

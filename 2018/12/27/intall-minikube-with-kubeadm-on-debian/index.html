<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>Intall Minikube with kubeadm on Debian 9</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2018/12/27/intall-minikube-with-kubeadm-on-debian/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?qqbuby" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Intall Minikube with kubeadm on Debian 9</h1>
    
    
    <p class="post-meta"><time datetime="2018-12-27T13:49:17+08:00" itemprop="datePublished">Dec 27, 2018</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <ul id="markdown-toc">
  <li><a href="#1-install-minikube-binary-with-curl" id="markdown-toc-1-install-minikube-binary-with-curl">1. Install minikube binary with curl</a></li>
  <li><a href="#2-install-kubectl-binary-with-curl" id="markdown-toc-2-install-kubectl-binary-with-curl">2. Install kubectl binary with curl</a></li>
  <li><a href="#3-install-virtualbox-with-apt" id="markdown-toc-3-install-virtualbox-with-apt">3. Install VirtualBox with APT</a></li>
  <li><a href="#4-start-minikube" id="markdown-toc-4-start-minikube">4. Start minikube</a></li>
  <li><a href="#5-tips-and-tricks" id="markdown-toc-5-tips-and-tricks">5 Tips and Tricks</a>    <ul>
      <li><a href="#51-error-starting-cluster--kubeadm-init-error" id="markdown-toc-51-error-starting-cluster--kubeadm-init-error">5.1 Error starting cluster:  kubeadm init error</a></li>
      <li><a href="#52-minikube-hangs-up-at-machine-exists-restarting-cluster-components" id="markdown-toc-52-minikube-hangs-up-at-machine-exists-restarting-cluster-components">5.2 Minikube hangs up at Machine exists, restarting cluster components…</a></li>
      <li><a href="#53-minikube-useful-cli" id="markdown-toc-53-minikube-useful-cli">5.3 Minikube Useful CLI</a></li>
      <li><a href="#54-run-a-stateless-nginx-application" id="markdown-toc-54-run-a-stateless-nginx-application">5.4 Run a Stateless Nginx Application</a></li>
      <li><a href="#55-start-minikube-with-custom-cpus-and-ram" id="markdown-toc-55-start-minikube-with-custom-cpus-and-ram">5.5 Start minikube with custom CPUs and RAM.</a></li>
      <li><a href="#56-minikube-hangs-up-during-startup-at-the-first-time" id="markdown-toc-56-minikube-hangs-up-during-startup-at-the-first-time">5.6 Minikube hangs up during startup at the first time.</a></li>
      <li><a href="#57-try-to-reset-kubernetes-cluster-to-solve-some-unexpected-problem" id="markdown-toc-57-try-to-reset-kubernetes-cluster-to-solve-some-unexpected-problem">5.7 Try to reset kubernetes cluster to solve some unexpected problem.</a></li>
      <li><a href="#58-useful-clis-for-debuging-minikube-and-cluster-resources" id="markdown-toc-58-useful-clis-for-debuging-minikube-and-cluster-resources">5.8 Useful CLIs for debuging minikube and cluster resources.</a></li>
      <li><a href="#59-start-minikube-with-http-proxy" id="markdown-toc-59-start-minikube-with-http-proxy">5.9 Start minikube with HTTP proxy</a></li>
    </ul>
  </li>
  <li><a href="#6-references" id="markdown-toc-6-references">6. References</a></li>
</ul>
<hr />

<h2 id="1-install-minikube-binary-with-curl">1. Install minikube binary with curl</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-Lo</span> minikube https://github.com/kubernetes/minikube/releases/download/v0.32.0/minikube-linux-amd64 <span class="o">&amp;&amp;</span> <span class="nb">chmod</span> +x minikube <span class="o">&amp;&amp;</span> <span class="nb">sudo cp </span>minikube /usr/local/bin/ <span class="o">&amp;&amp;</span> <span class="nb">rm </span>minikube
</code></pre></div></div>

<p>Use the following command to enable bash completion for kubernetes with kubectl:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>bash-completion <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'minikube completion bash &gt; /etc/bash_completion.d/minikube.bash'</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /etc/bash_completion.d/minikube.bash
</code></pre></div></div>

<h2 id="2-install-kubectl-binary-with-curl">2. Install kubectl binary with curl</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LO</span> https://storage.googleapis.com/kubernetes-release/release/<span class="si">$(</span>curl <span class="nt">-s</span> https://storage.googleapis.com/kubernetes-release/release/stable.txt<span class="si">)</span>/bin/linux/amd64/kubectl <span class="o">&amp;&amp;</span> <span class="nb">chmod</span> +x ./kubectl <span class="o">&amp;&amp;</span> <span class="nb">sudo mv</span> ./kubectl /usr/local/bin/kubectl
</code></pre></div></div>

<blockquote>
  <blockquote>
    <p>You must use a kubectl version that is within one minor version difference of your cluster. For example, a v1.2 client should work with v1.1, v1.2, and v1.3 master. Using the latest version of kubectl helps avoid unforeseen issues.</p>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <p>To download <code class="language-plaintext highlighter-rouge">kubectl</code> behind HTTP proxy (e.g. through GFW to access Google, FB etc..), please set up environment as below:</p>
  </blockquote>

  <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">YOURPROXY</span><span class="o">=</span>127.0.0.1 <span class="c"># please update with your HTTP proxy host</span>
<span class="nv">PORT</span><span class="o">=</span>1080 <span class="c"># please update with your HTTP proxy port</span>
<span class="nb">export</span> <span class="o">{</span>HTTP,HTTPS<span class="o">}</span><span class="nv">_PROXY</span><span class="o">=</span>http://<span class="nv">$YOURPROXY</span>:<span class="nv">$PORT</span>/
<span class="nb">export</span> <span class="o">{</span>http,https<span class="o">}</span><span class="nv">_proxy</span><span class="o">=</span>http://<span class="nv">$YOURPROXY</span>:<span class="nv">$PORT</span>/
<span class="nb">export</span> <span class="o">{</span>NO_PROXY,no_proxy<span class="o">}=</span>localhost,127.0.0.1,::1,192.168.99.100
</code></pre></div>  </div>
</blockquote>

<p>Use the following command to enable bash completion for kubernetes with kubectl:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>bash-completion <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'kubectl completion bash &gt; /etc/bash_completion.d/kubectl.bash'</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /etc/bash_completion.d/kubectl.bash
</code></pre></div></div>

<h2 id="3-install-virtualbox-with-apt">3. Install VirtualBox with APT</h2>

<p>Add Oracle public key for apt-secure:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LO</span> https://www.virtualbox.org/download/oracle_vbox_2016.asc
<span class="nb">sudo </span>apt-key add oracle_vbox_2016.asc
</code></pre></div></div>

<p>Add the following line to your <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list.d/vmbox.list</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'deb http://download.virtualbox.org/virtualbox/debian stretch contrib'</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/vmbox.list
</code></pre></div></div>

<p>To install VirtualBox, do</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install </span>virtualbox-5.2 <span class="nt">-y</span>
</code></pre></div></div>

<blockquote>
  <p>This system is currently not set up to build kernel modules.
Please install the Linux kernel “header” files matching the current kernel
for adding new hardware support to the system.
The distribution packages containing the headers are probably:
    linux-headers-amd64 linux-headers-4.9.0-4-amd64
This system is currently not set up to build kernel modules.
Please install the Linux kernel “header” files matching the current kernel
for adding new hardware support to the system.
The distribution packages containing the headers are probably:
    linux-headers-amd64 linux-headers-4.9.0-4-amd64</p>

  <p>There were problems setting up VirtualBox.  To re-start the set-up process, run
  /sbin/vboxconfig
as root.</p>
</blockquote>

<blockquote>
  <p>To solve the problem, please execute the command as below:</p>

  <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>linux-headers-amd64 linux-headers-4.9.0-4-amd64 <span class="o">&amp;&amp;</span> <span class="nb">sudo</span> /sbin/vboxconfig
</code></pre></div>  </div>
</blockquote>

<h2 id="4-start-minikube">4. Start minikube</h2>

<p>Before start the minikube, you can setup some optional environment variables as below:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">MINIKUBE_WANTUPDATENOTIFICATION</span><span class="o">=</span><span class="nb">false
export </span><span class="nv">MINIKUBE_WANTREPORTERRORPROMPT</span><span class="o">=</span><span class="nb">false

export </span><span class="nv">MINIKUBE_HOME</span><span class="o">=</span><span class="nv">$HOME</span>
<span class="nb">export </span><span class="nv">CHANGE_MINIKUBE_NONE_USER</span><span class="o">=</span><span class="nb">true
mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.kube
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.minikube
<span class="nb">touch</span> <span class="nv">$HOME</span>/.kube/config

<span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$HOME</span>/.kube/config
</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">minikube start</code> to start the minikube cluster.</p>

<blockquote>
  <p>You can also use the <code class="language-plaintext highlighter-rouge">minikube start -v 9</code> to enable debug logging during startup.</p>
</blockquote>

<blockquote>
  <p>At the first time, Minikube will download needed <code class="language-plaintext highlighter-rouge">kubeadm</code>, <code class="language-plaintext highlighter-rouge">kubelet</code> and ISO image (e.g. <code class="language-plaintext highlighter-rouge">minikube-v0.32.0.iso</code>) and start the Minikube virtual machine. To check the status of Minikube <code class="language-plaintext highlighter-rouge">minikube status</code> can be executed. If Minikube works fine the output of the command will be like below.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube status
host: Running
kubelet: Running
apiserver: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
</code></pre></div></div>

<blockquote>
  <p>After the VM started, minikube will pull docker images to start cluster components. The minikube might be fail to pull images via your network behind GFW. If the minikube starts failed, please check the needed docker images whether have downloaded as expected.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>minikube status
 E1227 18:46:05.523830   16511 status.go:88] Error kubelet status: getting status: Process exited with status 3
 <span class="nv">$ </span>minikube ssh <span class="s1">'docker images|grep -v REPOSITORY|wc -l'</span>  <span class="c"># print docker images count in the minikube VM</span>
 0
</code></pre></div></div>

<blockquote>
  <p>The version 0.32.0 minikube will use <code class="language-plaintext highlighter-rouge">kubeadm</code> to bootstrap clusters. You can use <code class="language-plaintext highlighter-rouge">kubeadm config images list</code> to print a list of images kubeadm will use.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod</span> +x ./.minikube/cache/v1.12.4/kubeadm <span class="o">&amp;&amp;</span> ./.minikube/cache/v1.12.4/kubeadm config images list
 I1227 18:42:36.348876   16494 version.go:93] could not fetch a Kubernetes version from the internet: unable to get URL <span class="s2">"https://dl.k8s.io/release/stable-1.txt"</span>: Get https://dl.k8s.io/release/stable-1.txt: net/http: request canceled <span class="o">(</span>Client.Timeout exceeded <span class="k">while </span>awaiting headers<span class="o">)</span>
 I1227 18:42:36.348953   16494 version.go:94] falling back to the <span class="nb">local </span>client version: v1.12.4
 k8s.gcr.io/kube-apiserver:v1.12.4
 k8s.gcr.io/kube-controller-manager:v1.12.4
 k8s.gcr.io/kube-scheduler:v1.12.4
 k8s.gcr.io/kube-proxy:v1.12.4
 k8s.gcr.io/pause:3.1
 k8s.gcr.io/etcd:3.2.24
 k8s.gcr.io/coredns:1.2.2
</code></pre></div></div>

<blockquote>
  <p>To solve the above problem, you can mannully pull these images with <a href="/2018/08/09/http-proxy-docker-minikube/#2-custom-docker-daemon-options-with-http-proxy">Docker behind HTTP proxy</a> and use <code class="language-plaintext highlighter-rouge">docker save</code> and <code class="language-plaintext highlighter-rouge">docker load</code> with <code class="language-plaintext highlighter-rouge">minikube ssh</code> to minikube VM. For example:</p>
</blockquote>

<pre><code class="language-none"> $ minikube ssh # enter the minikube VM
                          _             _            
             _         _ ( )           ( )           
   ___ ___  (_)  ___  (_)| |/')  _   _ | |_      __  
 /' _ ` _ `\| |/' _ `\| || , &lt;  ( ) ( )| '_`\  /'__`\
 | ( ) ( ) || || ( ) || || |\`\ | (_) || |_) )(  ___/
 (_) (_) (_)(_)(_) (_)(_)(_) (_)`\___/'(_,__/'`\____)
 
 $ scp x@192.168.66.140:/home/x/minikube-v0.32.0/images.tar . # use scp to copy images
 x@192.168.66.140's password: 
 images.tar                                                                                                                              100% 1008MB  11.8MB/s   01:25    
 $ docker load -i images.tar 
 0c1604b64aed: Loading layer [==================================================&gt;]   44.6MB/44.6MB
 dc6f419d40a2: Loading layer [==================================================&gt;]  3.407MB/3.407MB
 2a6024944fd1: Loading layer [==================================================&gt;]  50.36MB/50.36MB
 Loaded image: k8s.gcr.io/kube-proxy:v1.12.4
 8a788232037e: Loading layer [==================================================&gt;]   1.37MB/1.37MB
 fef21df29df0: Loading layer [==================================================&gt;]    163MB/163MB
 Loaded image: k8s.gcr.io/kube-controller-manager:v1.12.4
 63c53f48f45b: Loading layer [==================================================&gt;]  57.22MB/57.22MB
 Loaded image: k8s.gcr.io/kube-scheduler:v1.12.4
 469d6bfe88bc: Loading layer [==================================================&gt;]  192.8MB/192.8MB
 Loaded image: k8s.gcr.io/kube-apiserver:v1.12.4
 9198eadacc0a: Loading layer [==================================================&gt;]  542.2kB/542.2kB
 9949e50e3468: Loading layer [==================================================&gt;]  38.94MB/38.94MB
 Loaded image: k8s.gcr.io/coredns:1.2.2
 cd7100a72410: Loading layer [==================================================&gt;]  4.403MB/4.403MB
 86e1bc08db56: Loading layer [==================================================&gt;]  2.732MB/2.732MB
 ffb9278c02c6: Loading layer [==================================================&gt;]  6.082MB/6.082MB
 49c864efad6a: Loading layer [==================================================&gt;]  3.584kB/3.584kB
 . . .
 $ minikube stop &amp;&amp; minikube start # restart minikube to restart cluster components
</code></pre>

<blockquote>
  <p>You can also use <a href="/2018/08/09/http-proxy-docker-minikube/#3-start-minikube-behind-a-http-proxy">minikube with an HTTP proxy</a> to supply Docker in the minikube VM with the proxy settings. For example:</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start <span class="nt">--docker-env</span> <span class="nv">http_proxy</span><span class="o">=</span>http://<span class="nv">$YOURPROXY</span>:PORT <span class="se">\</span>
               <span class="nt">--docker-env</span> <span class="nv">https_proxy</span><span class="o">=</span>https://<span class="nv">$YOURPROXY</span>:PORT
</code></pre></div></div>

<h2 id="5-tips-and-tricks">5 Tips and Tricks</h2>

<h3 id="51-error-starting-cluster--kubeadm-init-error">5.1 Error starting cluster:  kubeadm init error</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start <span class="nt">-v</span> 9
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
E1227 20:41:40.056575   21198 start.go:343] Error starting cluster:  kubeadm init error 
<span class="nb">sudo</span> /usr/bin/kubeadm init <span class="nt">--config</span> /var/lib/kubeadm.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>DirAvailable--etc-kubernetes-manifests <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>DirAvailable--data-minikube <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>Port-10250 <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-etcd.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>Swap <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>CRI 
 running <span class="nb">command</span>: : Process exited with status 2
</code></pre></div></div>

<p>This is beacuse there are no needed <code class="language-plaintext highlighter-rouge">kubeadm config images list</code> in the minikube VM. To solve it, please load the required docker images and reset kubeadm.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker images
REPOSITORY                                TAG                 IMAGE ID            CREATED             SIZE
k8s.gcr.io/kubernetes-dashboard-amd64     v1.10.1             f9aed6605b81        10 days ago         122MB
k8s.gcr.io/kube-proxy                     v1.12.4             6d393e89739f        13 days ago         96.5MB
k8s.gcr.io/kube-controller-manager        v1.12.4             51b2a8e5ff78        13 days ago         164MB
k8s.gcr.io/kube-scheduler                 v1.12.4             c1b5e63c0b56        13 days ago         58.4MB
k8s.gcr.io/kube-apiserver                 v1.12.4             c04b373449d3        13 days ago         194MB
k8s.gcr.io/etcd                           3.2.24              3cab8e1b9802        3 months ago        220MB
k8s.gcr.io/coredns                        1.2.2               367cdc8433a4        4 months ago        39.2MB
k8s.gcr.io/kube-addon-manager             v8.6                9c16409588eb        10 months ago       78.4MB
k8s.gcr.io/pause                          3.1                 da86e6ba6ca1        12 months ago       742kB
gcr.io/k8s-minikube/storage-provisioner   v1.8.1              4689081edb10        13 months ago       80.8MB
<span class="nv">$ </span><span class="nb">sudo </span>kubeadm reset <span class="nt">-f</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
    <span class="nb">sudo</span> /usr/bin/kubeadm init <span class="nt">--config</span> /var/lib/kubeadm.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>DirAvailable--etc-kubernetes-manifests <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>DirAvailable--data-minikube <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>Port-10250 <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>FileAvailable--etc-kubernetes-manifests-etcd.yaml <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>Swap <span class="nt">--ignore-preflight-errors</span><span class="o">=</span>CRI
</code></pre></div></div>

<blockquote>
  <p>You can also solve it via use minikube behind HTTP proxy to pull images through GFW.</p>
</blockquote>

<h3 id="52-minikube-hangs-up-at-machine-exists-restarting-cluster-components">5.2 Minikube hangs up at Machine exists, restarting cluster components…</h3>

<p>First of all, use the <code class="language-plaintext highlighter-rouge">minikube status</code> to get the local kubernetes cluster status.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube status
host: Running
kubelet: Running
apiserver: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
</code></pre></div></div>

<p>If it looks fine, try the <code class="language-plaintext highlighter-rouge">kubectl get po --all-namespaces</code> as below.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get po <span class="nt">--all-namespaces</span> 
NAMESPACE     NAME                                    READY   STATUS             RESTARTS   AGE
kube-system   etcd-minikube                           1/1     Running            1          19m
kube-system   kube-addon-manager-minikube             1/1     Running            1          19m
kube-system   kube-apiserver-minikube                 1/1     Running            0          4s
kube-system   kube-controller-manager-minikube        1/1     Running            0          19m
kube-system   kube-scheduler-minikube                 1/1     Running            1          19m
kube-system   kubernetes-dashboard-5bff5f8fb8-c7dz7   0/1     ImagePullBackOff   0          19m
kube-system   storage-provisioner                     0/1     ImagePullBackOff   0          19m
</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">kubectl -n kube-system describe po [POD_NAME]</code> to show details of the above failed pods.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nt">-n</span> kube-system describe po storage-provisioner
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
Events:
  Type     Reason     Age                  From               Message
  <span class="nt">----</span>     <span class="nt">------</span>     <span class="nt">----</span>                 <span class="nt">----</span>               <span class="nt">-------</span>
  Normal   Scheduled  28m                  default-scheduler  Successfully assigned kube-system/storage-provisioner to minikube
  Normal   Pulling    26m <span class="o">(</span>x4 over 28m<span class="o">)</span>    kubelet, minikube  pulling image <span class="s2">"gcr.io/k8s-minikube/storage-provisioner:v1.8.1"</span>
  Warning  Failed     25m <span class="o">(</span>x4 over 28m<span class="o">)</span>    kubelet, minikube  Failed to pull image <span class="s2">"gcr.io/k8s-minikube/storage-provisioner:v1.8.1"</span>: rpc error: code <span class="o">=</span> Unknown desc <span class="o">=</span> Error response from daemon: Get https://gcr.io/v2/: net/http: request canceled <span class="k">while </span>waiting <span class="k">for </span>connection <span class="o">(</span>Client.Timeout exceeded <span class="k">while </span>awaiting headers<span class="o">)</span>
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
  Normal   BackOff    7m20s <span class="o">(</span>x7 over 10m<span class="o">)</span>  kubelet, minikube  Back-off pulling image <span class="s2">"gcr.io/k8s-minikube/storage-provisioner:v1.8.1"</span>
  Warning  Failed     5m3s <span class="o">(</span>x15 over 10m<span class="o">)</span>  kubelet, minikube  Error: ImagePullBackOff
<span class="nv">$ </span>kubectl <span class="nt">-n</span> kube-system describe po kubernetes-dashboard-5bff5f8fb8-c7dz7
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
Events:
  Type     Reason       Age                   From               Message
  <span class="nt">----</span>     <span class="nt">------</span>       <span class="nt">----</span>                  <span class="nt">----</span>               <span class="nt">-------</span>
  Normal   Scheduled    31m                   default-scheduler  Successfully assigned kube-system/kubernetes-dashboard-5bff5f8fb8-c7dz7 to minikube
  Normal   Pulling      28m <span class="o">(</span>x4 over 31m<span class="o">)</span>     kubelet, minikube  pulling image <span class="s2">"k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1"</span>
  Warning  Failed       28m <span class="o">(</span>x4 over 30m<span class="o">)</span>     kubelet, minikube  Failed to pull image <span class="s2">"k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1"</span>: rpc error: code <span class="o">=</span> Unknown desc <span class="o">=</span> Error response from daemon: Get https://k8s.gcr.io/v2/: net/http: request canceled <span class="k">while </span>waiting <span class="k">for </span>connection <span class="o">(</span>Client.Timeout exceeded <span class="k">while </span>awaiting headers<span class="o">)</span>
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
  Normal   BackOff      9m54s <span class="o">(</span>x6 over 12m<span class="o">)</span>   kubelet, minikube  Back-off pulling image <span class="s2">"k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1"</span>
  Warning  Failed       2m26s <span class="o">(</span>x36 over 12m<span class="o">)</span>  kubelet, minikube  Error: ImagePullBackOff

</code></pre></div></div>

<p>We find there are two pods <code class="language-plaintext highlighter-rouge">kubernetes-dashboard-5bff5f8fb8-c7dz7</code> and <code class="language-plaintext highlighter-rouge">storage-provisioner</code> with <code class="language-plaintext highlighter-rouge">ImagePullBackOff</code> status. This is beacuse the minikube enable the addons <code class="language-plaintext highlighter-rouge">dashboard</code> and <code class="language-plaintext highlighter-rouge">storage-provisioner</code> as default, and minikube could not pull image via your network ( e.g. through GFW).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube addons list
- addon-manager: enabled
- dashboard: enabled
- default-storageclass: enabled
- efk: disabled
- freshpod: disabled
- gvisor: disabled
- heapster: disabled
- ingress: disabled
- metrics-server: disabled
- nvidia-driver-installer: disabled
- nvidia-gpu-device-plugin: disabled
- registry: disabled
- registry-creds: disabled
- storage-provisioner: enabled
</code></pre></div></div>

<p>To sovle it, your can pull the images <code class="language-plaintext highlighter-rouge">k8s.gcr.io/kubernetes-dashboard-amd64:v1.10.1</code> and <code class="language-plaintext highlighter-rouge">gcr.io/k8s-minikube/storage-provisioner:v1.8.1</code> behind HTTP proxy and use <code class="language-plaintext highlighter-rouge">docker save</code> and <code class="language-plaintext highlighter-rouge">docker load</code> to load these images into you minikub VM.</p>

<blockquote>
  <p>If you use the minikube with HTT proxy, you will not see this problem.</p>
</blockquote>

<blockquote>
  <p>You can also use <code class="language-plaintext highlighter-rouge">minikube addons disable [ADDONS_NAME]</code> to disable addons both <code class="language-plaintext highlighter-rouge">dashboard</code> and <code class="language-plaintext highlighter-rouge">storage-provisioner</code>, then reset the kubeadm.</p>
</blockquote>

<h3 id="53-minikube-useful-cli">5.3 Minikube Useful CLI</h3>

<pre><code class="language-none">$ minikube -h
Minikube is a CLI tool that provisions and manages single-node Kubernetes clusters optimized for development workflows.

Usage:
  minikube [command]

Available Commands:
  addons         Modify minikube's kubernetes addons
  completion     Outputs minikube shell completion for the given shell (bash or zsh)
  ip             Retrieves the IP address of the running cluster
  logs           Gets the logs of the running instance, used for debugging minikube, not user code
  service        Gets the kubernetes URL(s) for the specified service in your local cluster
  ssh            Log into or run a command on a machine with SSH; similar to 'docker-machine ssh'
  start          Starts a local kubernetes cluster
  status         Gets the status of a local kubernetes cluster
  stop           Stops a running local kubernetes cluster
  version        Print the version of minikube
</code></pre>

<h3 id="54-run-a-stateless-nginx-application">5.4 Run a Stateless Nginx Application</h3>

<ol>
  <li>
    <p>Start minikube</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>minikube start 
 Starting <span class="nb">local </span>Kubernetes v1.12.4 cluster...
 Starting VM...
 Getting VM IP address...
 Moving files into cluster...
 Setting up certs...
 Connecting to cluster...
 Setting up kubeconfig...
 Stopping extra container runtimes...
 Machine exists, restarting cluster components...
 Verifying kubelet health ...
 Verifying apiserver health .....Kubectl is now configured to use the cluster.
 Loading cached images from config file.
    
    
 Everything looks great. Please enjoy minikube!
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a YAML file named nignx.yaml as blow:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="s">---</span>
 <span class="s">apiVersion</span><span class="err">:</span> <span class="s">v1</span>
 <span class="s">kind</span><span class="err">:</span> <span class="s">Service</span>
 <span class="s">metadata</span><span class="err">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">nginx</span>
 <span class="na">spec</span><span class="pi">:</span>
   <span class="na">selector</span><span class="pi">:</span>
     <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
   <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span>
   <span class="na">ports</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
 <span class="s">---</span>
 <span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
 <span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
 <span class="na">metadata</span><span class="pi">:</span>
   <span class="na">name</span><span class="pi">:</span> <span class="s">nginx</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
 <span class="na">spec</span><span class="pi">:</span>
   <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>
   <span class="na">selector</span><span class="pi">:</span>
     <span class="na">matchLabels</span><span class="pi">:</span>
       <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
   <span class="na">template</span><span class="pi">:</span>
     <span class="na">metadata</span><span class="pi">:</span>
       <span class="na">labels</span><span class="pi">:</span>
         <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
     <span class="na">spec</span><span class="pi">:</span>
       <span class="na">containers</span><span class="pi">:</span>
         <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx</span>
           <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:1.15</span>
           <span class="na">ports</span><span class="pi">:</span>
             <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
 <span class="s">...</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a Nginx service and deployment based on the above YAML file.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ $ </span>kubectl create <span class="nt">-f</span> nginx.yaml 
 service/nginx created
 deployment.apps/nginx created
</code></pre></div>    </div>
  </li>
  <li>
    <p>List the pods created by the deployment:</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>kubectl get po <span class="nt">-w</span>
 NAME                     READY   STATUS              RESTARTS   AGE
 nginx-5d445489fb-gjbs6   0/1     ContainerCreating   0          3s
 nginx-5d445489fb-h7vjl   0/1     ContainerCreating   0          3s
 nginx-5d445489fb-knf9f   0/1     ContainerCreating   0          3s
 nginx-5d445489fb-knf9f   1/1   Running   0     48s
 nginx-5d445489fb-gjbs6   1/1   Running   0     51s
 nginx-5d445489fb-h7vjl   1/1   Running   0     60s
</code></pre></div>    </div>
  </li>
  <li>
    <p>Lists the URLs for the services in your local cluster</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>minikube service list 
 |-------------|------------|-----------------------------|
 |  NAMESPACE  |    NAME    |             URL             |
 |-------------|------------|-----------------------------|
 | default     | kubernetes | No node port                |
 | default     | nginx      | http://192.168.99.100:32151 |
 | kube-system | kube-dns   | No node port                |
 |-------------|------------|-----------------------------|
</code></pre></div>    </div>
  </li>
  <li>
    <p>Access the Nginx service</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>curl <span class="nt">-iI</span> <span class="si">$(</span>minikube service nginx <span class="nt">--url</span><span class="si">)</span>
 HTTP/1.1 200 OK
 Server: nginx/1.15.8
 Date: Thu, 27 Dec 2018 13:33:25 GMT
 Content-Type: text/html
 Content-Length: 612
 Last-Modified: Tue, 25 Dec 2018 09:56:47 GMT
 Connection: keep-alive
 ETag: <span class="s2">"5c21fedf-264"</span>
 Accept-Ranges: bytes
    
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="55-start-minikube-with-custom-cpus-and-ram">5.5 Start minikube with custom CPUs and RAM.</h3>

<p>You can use the following command to start minikube with custom numbers of CPUs and amount of RAM allocated to the minikube VM and registry mirror.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube start <span class="nt">--cpus</span><span class="o">=</span>4 <span class="nt">--memory</span><span class="o">=</span>4096 <span class="nt">--registry-mirror</span> https://registry.docker-cn.com <span class="nt">-v</span> 9
</code></pre></div></div>

<h3 id="56-minikube-hangs-up-during-startup-at-the-first-time">5.6 Minikube hangs up during startup at the first time.</h3>

<p>If might be fail to download resources (e.g. iso, kubeadm, kubelet) during startup at the first time.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start <span class="nt">-h</span> | <span class="nb">grep</span> <span class="s2">"iso-url"</span>
      <span class="nt">--iso-url</span> string                    Location of the minikube iso <span class="o">(</span>default <span class="s2">"https://storage.googleapis.com/minikube/iso/minikube-v0.32.0.iso"</span><span class="o">)</span>
<span class="nv">$ </span>minikube start <span class="nt">-v</span> 9
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
Starting VM...
Downloading Minikube ISO
</code></pre></div></div>

<p>It might be fail to download the minikube iso from the default location via your network (e.g. through the GFW).</p>

<p>You can setup <em>HTTP</em> proxy environments at your terminal, then restart with <code class="language-plaintext highlighter-rouge">minikube start -v 9</code> and minikube will download the iso behind your proxy during startup.</p>

<p>You can also manually download the iso behind HTTP proxy to the location <code class="language-plaintext highlighter-rouge">.minikube/cache/iso/</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start <span class="nt">-h</span> | <span class="nb">grep</span> <span class="s1">'kubernetes-version'</span>
      <span class="nt">--kubernetes-version</span> string         The kubernetes version that the minikube VM will use <span class="o">(</span>ex: v1.2.3<span class="o">)</span> <span class="o">(</span>default <span class="s2">"v1.12.4"</span><span class="o">)</span>
<span class="nv">$ </span>minikube start <span class="nt">-v</span> 9
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span>
Moving files into cluster...
Downloading kubeadm v1.12.4
Downloading kubelet v1.12.4
</code></pre></div></div>

<p>Like the iso downloading, you can manually download the <code class="language-plaintext highlighter-rouge">kubeadm</code> and <code class="language-plaintext highlighter-rouge">kubelet</code> to <code class="language-plaintext highlighter-rouge">.minikube/cache/v1.12.4/</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-L</span> <span class="nt">--remote-name-all</span> https://storage.googleapis.com/kubernetes-release/release/<span class="k">${</span><span class="nv">RELEASE</span><span class="k">}</span>/bin/linux/amd64/<span class="o">{</span>kubeadm,kubelet,kubectl<span class="o">}</span>
<span class="nb">mv</span> <span class="o">{</span>kubeadm,kubelet<span class="o">}</span> .minikube/cache/v1.12.4/ 
</code></pre></div></div>

<h3 id="57-try-to-reset-kubernetes-cluster-to-solve-some-unexpected-problem">5.7 Try to reset kubernetes cluster to solve some unexpected problem.</h3>

<p>When minikube VM started, run <code class="language-plaintext highlighter-rouge">minikube ssh</code> to enter the minikube VM, and execute the following command to reset and initialize the cluster.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo kubeadm reset -f &amp;&amp; \
    sudo /usr/bin/kubeadm init \
    --config /var/lib/kubeadm.yaml \
    --ignore-preflight-errors=DirAvailable--etc-kubernetes-manifests \
    --ignore-preflight-errors=DirAvailable--data-minikube \
    --ignore-preflight-errors=Port-10250 \
    --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml \
    --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml \
    --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml \
    --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-etcd.yaml \
    --ignore-preflight-errors=Swap \
    --ignore-preflight-errors=CRI
</code></pre></div></div>

<h3 id="58-useful-clis-for-debuging-minikube-and-cluster-resources">5.8 Useful CLIs for debuging minikube and cluster resources.</h3>

<ul>
  <li>
    <p>Gets the status of a local kubernetes cluster.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>minikube status
</code></pre></div>    </div>
  </li>
  <li>
    <p>Gets the logs of the running instance, used for debugging minikube, not user code.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>minikube logs
</code></pre></div>    </div>
  </li>
  <li>
    <p>List all kubernetes objects across all namespaces.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>kubectl get all <span class="nt">--all-namespaces</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Show details of a specific resource or group of resources.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>kubectl describe <span class="nt">-h</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Print the logs for a container in a pod or specified resource.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$ </span>kubectl logs <span class="nt">-h</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="59-start-minikube-with-http-proxy">5.9 Start minikube with HTTP proxy</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube start <span class="se">\</span>
     <span class="nt">--docker-env</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span>http://10.11.12.13:1080/ <span class="se">\</span>
     <span class="nt">--docker-env</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span>http://10.11.12.13:1080/ <span class="se">\</span>
     <span class="nt">--docker-env</span> <span class="nv">NO_PROXY</span><span class="o">=</span>index.docker.io,registry.hub.docker.com,registry-1.docker.io,registry.docker-cn.com,registry-mirror-cache-cn.oss-cn-shanghai.aliyuncs.com,192.168.99.100 <span class="se">\</span>
     <span class="nt">--registry-mirror</span> https://registry.docker-cn.com <span class="se">\</span>
     <span class="nt">-v</span> 9
</code></pre></div></div>

<h2 id="6-references">6. References</h2>

<ul>
  <li><a href="https://github.com/kubernetes/minikube/releases/tag/v0.32.0">https://github.com/kubernetes/minikube/releases/tag/v0.32.0</a></li>
  <li><a href="https://github.com/kubernetes/minikube">https://github.com/kubernetes/minikube</a></li>
  <li>Running Kubernetes Locally via Minikube, <a href="https://kubernetes.io/docs/setup/minikube/">https://kubernetes.io/docs/setup/minikube/</a></li>
  <li><a href="https://kubernetes.io/docs/setup/minikube/#using-minikube-with-an-http-proxy">https://kubernetes.io/docs/setup/minikube/#using-minikube-with-an-http-proxy</a></li>
  <li>Docker and Minikube behind HTTP Proxy, <a href="/2018/08/09/http-proxy-docker-minikube/">https://codefarm.me/2018/08/09/http-proxy-docker-minikube/</a></li>
  <li><a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl">https://kubernetes.io/docs/setup/independent/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl</a></li>
</ul>

  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2018/09/04/python-notes-05-numbers/">&laquo; Python Notes 04 NUMERICS</a>
      
    </li>
    <li>
      
      <a href="/2018/12/29/tcpdump-examples/">Tcpdump Examples &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>

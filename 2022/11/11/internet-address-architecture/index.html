<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>TCP/IP: Internet Address Architecture</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2022/11/11/internet-address-architecture/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?qqbuby" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">TCP/IP: Internet Address Architecture</h1>
    
    
    <p class="post-meta"><time datetime="2022-11-11T08:33:09+08:00" itemprop="datePublished">Nov 11, 2022</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Every device connected to the Internet has at least one IP address. Devices used in private networks based on the TCP/IP protocols also require IP addresses.</p>
</div>
<div class="paragraph">
<p>In either case, the forwarding procedures implemented by IP routers use IP addresses to identify where traffic is going. IP addresses also indicate where traffic has come from.</p>
</div>
<div class="paragraph">
<p>IP addresses are similar in some ways to telephone numbers, but whereas telephone numbers are often known and used directly by end users.</p>
</div>
<div class="paragraph">
<p>IP addresses are often shielded from a user&#8217;s view by the Internet&#8217;s DNS, which allows most users to use names instead of numbers.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#expressing-ip-address">1. Expressing IP Address</a></li>
<li><a href="#basic-ip-address-structure">2. Basic IP Address Structure</a>
<ul class="sectlevel2">
<li><a href="#classful-addressing">2.1. Classful Addressing</a></li>
<li><a href="#subnet-addressing">2.2. Subnet Addressing</a></li>
<li><a href="#subnet-mask">2.3. Subnet mask</a></li>
<li><a href="#variable-length-subnet-masks-vlsm">2.4. Variable-Length Subnet Masks (VLSM)</a></li>
<li><a href="#broadcast-address">2.5. Broadcast Address</a></li>
<li><a href="#ipv6-addresses-and-interface-identifiers">2.6. IPv6 Addresses and Interface Identifiers</a></li>
</ul>
</li>
<li><a href="#cidr-and-aggregation">3. CIDR and Aggregation</a>
<ul class="sectlevel2">
<li><a href="#prefixes">3.1. Prefixes</a></li>
</ul>
</li>
<li><a href="#special-use-addresses">4. Special-Use Addresses</a>
<ul class="sectlevel2">
<li><a href="#multicast-addresses">4.1. Multicast Addresses</a></li>
<li><a href="#ipv4-multicast-addresses">4.2. IPv4 Multicast Addresses</a></li>
<li><a href="#ipv6-multicast-addresses">4.3. IPv6 Multicast Addresses</a></li>
<li><a href="#anycast-address">4.4. Anycast Address</a></li>
</ul>
</li>
<li><a href="#allocation">5. Allocation</a>
<ul class="sectlevel2">
<li><a href="#unicast">5.1. Unicast</a></li>
</ul>
</li>
<li><a href="#unicast-address-assignment">6. Unicast Address Assignment</a>
<ul class="sectlevel2">
<li><a href="#single-providerno-networksingle-address">6.1. Single Provider/No Network/Single Address</a></li>
<li><a href="#single-providersingle-networksingle-address">6.2. Single Provider/Single Network/Single Address</a></li>
<li><a href="#single-providermultiple-networksmultiple-addresses">6.3. Single Provider/Multiple Networks/Multiple Addresses</a></li>
<li><a href="#multiple-providersmultiple-networksmultiple-addresses-multihoming">6.4. Multiple Providers/Multiple Networks/Multiple Addresses (Multihoming)</a></li>
</ul>
</li>
<li><a href="#references">7. References</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="expressing-ip-address">1. Expressing IP Address</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The vast majority of Internet users who are familiar with IP addresses understand the most popular type: <strong>IPv4</strong> addresses. Such addresses are often represented in so-called dotted-quad or dotted-decimal notation.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 1. Example IPv4 addresses written in dotted-quad and binary notation</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Dotted-Quad Representation</th>
<th class="tableblock halign-left valign-top">Binary Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00000000 00000000 00000000 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.3.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00000001 00000010 00000011 00000100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00001010 00000000 00000000 11111111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">165.195.130.107</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10100101 11000011 10000010 01101011</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11111111 11111111 11111111</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In <strong>IPv6</strong>, addresses are 128 bits in length, four times larger than IPv4 addresses, and generally speaking are less familiar to most users. The conventional notation adopted for IPv6 addresses is a series of four hexadecimal ("hex," or base-16) numbers called <em>blocks</em> or <em>fields</em> separated by colons.</p>
</div>
<div class="paragraph">
<p>Although not as familiar to users as decimal numbers, hexadecimal numbers make the task of converting to binary somewhat simpler. In addition, a number of agreed-upon simplifications have been standardized for expressing IPv6 addresses [RFC4291]:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Leading zeros of a block need not be written.</p>
<div class="paragraph">
<p>For example, the address <em>5f05:2000:80ad:5800:0058:0800:2023:1d71</em> can been written as <em>5f05:2000:80ad:5800:58:800:2023:1d71</em>.</p>
</div>
</li>
<li>
<p>Blocks of all zeros can be omitted and replaced by the notation <em>::</em>.</p>
<div class="paragraph">
<p>For example, the IPv6 address <em>0:0:0:0:0:0:0:1</em> can be written more compactly as <em>::1</em>. Similarly, the address <em>2001:0db8:0:0:0:0:0:2</em> can be written more compactly
as <em>2001:db8::2</em>.</p>
</div>
<div class="paragraph">
<p>To avoid ambiguities, the <em>::</em> notation may be used only once in an IPv6 address.</p>
</div>
</li>
<li>
<p>Embedded IPv4 addresses represented in the IPv6 format can use a form of hybrid notation in which the block immediately preceding the IPv4 portion of the address has the value ffff and the remaining part of the address is formatted using dotted-quad.</p>
<div class="paragraph">
<p>For example, the IPv6 address <em>::ffff:10.0.0.1</em> represents the IPv4 address <em>10.0.0.1</em>. This is called an <em>IPv4-mapped IPv6 address</em>.</p>
</div>
</li>
<li>
<p>A conventional notation is adopted in which the low-order 32 bits of the IPv6 address can be written using dotted-quad notation.</p>
<div class="paragraph">
<p>The IPv6 address <em>::0102:f001</em> is therefore equivalent to the address <em>::1.2.240.1</em>. This is called an <em>IPv4-compatible IPv6 address</em>.</p>
</div>
<div class="paragraph">
<p>Note that IPv4-compatible addresses are not the same as IPv4-mapped addresses; they are compatible only in the sense that they can be written down or manipulated by software in a way similar to IPv4 addresses.</p>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 2. Examples of IPv6 addresses and their binary representations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Hex Notation</th>
<th class="tableblock halign-left valign-top">Binary Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5f05:2000:80ad:5800:58:800:2023:1d71</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0101111100000101 0010000000000000
1000000010101101 0101100000000000
0000000001011000 0000100000000000
0010000000100011 0001110101110001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::1.2.240.1 or ::102:f001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000100000010 1111000000000001</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In some circumstances (e.g., when expressing a URL containing an address) the colon delimiter in an IPv6 address may be confused with another separator
such as the colon used between an IP address and a port number. In such circumstances, bracket characters, <em>[</em> and <em>]</em>, are used to surround the IPv6 address.</p>
</div>
<div class="paragraph">
<p>For example, the URL <em>http://[2001:0db8:85a3:08d3:1319:8a2e:0370:7344]:443/</em> refers to port number <em>443</em> on IPv6 host <em>2001:0db8:85a3:08d3:1319:8a2e:0370:7344</em> using the HTTP/TCP/IPv6 protocols.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="basic-ip-address-structure">2. Basic IP Address Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because of the large number of addresses (especially for IPv6), it is convenient to divide the address space into chunks. IP addresses are grouped by type and size.</p>
</div>
<div class="paragraph">
<p>Most of the IPv4 address chunks are eventually subdivided down to a single address and used to identify a single network interface of a computer attached to the Internet or to some private intranet. These addresses are called <strong>unicast</strong> addresses.</p>
</div>
<div class="paragraph">
<p>Beyond <strong>unicast addresses</strong>, other types of addresses include <strong>broadcast</strong>, <strong>multicast</strong>, and <strong>anycast</strong>, which may refer to more than one interface, plus some special-purpose addresses.</p>
</div>
<div class="sect2">
<h3 id="classful-addressing">2.1. Classful Addressing</h3>
<div class="paragraph">
<p>When the Internet’s address structure was originally defined, every unicast IP address had a <em>network</em> portion, to identify the network on which the interface using the IP address was to be found, and a <em>host</em> portion, used to identify the particular host on the network given in the network portion. Thus, some number of contiguous bits in the address became known as the <em>net number</em>, and remaining bits were known as the <em>host number</em>. At the time, most hosts had only a single network interface, so the terms <em>interface address</em> and <em>host address</em> were used somewhat interchangeably.</p>
</div>
<div class="paragraph">
<p>With the realization that different networks might have different numbers of hosts, and that each host requires a unique IP address, a partitioning was devised wherein different-size allocation units of IP address space could be given out to different sites, based on their current and projected number of hosts. The partitioning of the address space involved <strong>five classes</strong>. Each class represented a different trade-off in the number of bits of a 32-bit IPv4 address devoted to the network number versus the number of bits devoted to the host number.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. The original ("classful") IPv4 address space partitioning</caption>
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 8.3333%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Address Range</th>
<th class="tableblock halign-left valign-top">High-Order Bits</th>
<th class="tableblock halign-left valign-top">Use</th>
<th class="tableblock halign-left valign-top">Fraction of Total</th>
<th class="tableblock halign-left valign-top">Number of Nets</th>
<th class="tableblock halign-left valign-top">Number of Hosts</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0–127.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicast/special</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1/2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16,777,216</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0–191.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicast/special</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1/4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16,384</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65,536</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.0.0.0–223.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicast/special</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2,097,152</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.0.0–239.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multicast</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">240.0.0.0–255.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1111</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="subnet-addressing">2.2. Subnet Addressing</h3>
<div class="paragraph">
<p>One of the earliest difficulties encountered when the Internet began to grow was the inconvenience of having to allocate a new network number for any new network segment that was to be attached to the Internet. This became especially cumbersome with the development and increasing use of local area networks (LANs) in the early 1980s.</p>
</div>
<div class="paragraph">
<p>To address the problem, it was natural to consider a way that a site attached to the Internet could be allocated a network number centrally that could then be subdivided locally by site administrators. If this could be accomplished without altering the rest of the Internet&#8217;s core routing infrastructure, so much the better.</p>
</div>
<div class="paragraph">
<p>Implementing this idea would require the ability to alter the line between the network portion of an IP address and the host portion, but only for local purposes at a site; the rest of the Internet would "see" only the traditional class A, B, and C partitions. The approach adopted to support this capability is called <strong>subnet addressing</strong>[RFC0950].</p>
</div>
<div class="paragraph">
<p>Using subnet addressing, a site is allocated a class A, B, or C network number, leaving some number of remaining host bits to be further allocated and assigned within a site. The site may further divide the host portion of its base address allocation into a <strong>subnetwork</strong> (subnet) number and a host number.</p>
</div>
<div class="paragraph">
<p>In exchange for the additional flexibility provided by subnet addressing, a new cost is imposed. Because the definition of the <strong>Subnet</strong> and <strong>Host</strong> fields is now site-specific (not dictated by the class of the network number), all routers and hosts at a site require a new way to determine where the Subnet field of the address and the Host field of the address are located within the address. Before subnets, this information could be derived directly by knowing whether a network number was from class A, B, or C (as indicated by the first few bits in the address).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. An example of a subnetted class B address. Using 8 bits for the subnet ID provides for 256 subnets with 254 hosts on each of the subnets. This partitioning may be altered by the network administrator.</caption>
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top" colspan="2">Centrally Allocated</th>
<th class="tableblock halign-left valign-top" colspan="2">Locally Managed at Site</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Net Number (16 bits; 14 free)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subnet ID (8 bits)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host ID (8 bits)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This particular configuration allows the site to support 256 subnetworks, and each subnetwork may contain up to 254 hosts (now the first and last addresses for each subnetwork are not available, as opposed to losing only the first and last addresses of the entire allocated range). Recall that the subnetwork structure is known only by hosts and routers where the subnetting is taking place. The remainder of the Internet still treats any address associated with the site just as it did prior to the advent of subnet addressing.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/subnet-addressing.png" alt="subnet addressing" width="55%" height="55%">
</div>
<div class="title">Figure 1. A site is allocated the classical class B network number 128.32. The network administrator decides to apply a site-wide subnet mask of 255.255.255.0, giving 256 subnetworks where each subnetwork can hold 256 – 2 = 254 hosts. The IPv4 address of each host on the same subnet has the subnetwork number in common. All of the IPv4 addresses of hosts on the left-hand LAN segment start with 128.32.1, and all of those on the right start with 128.32.2.</div>
</div>
</div>
<div class="sect2">
<h3 id="subnet-mask">2.3. Subnet mask</h3>
<div class="paragraph">
<p>The <strong>subnet mask</strong> is an assignment of bits used by a host or router to determine how the network and subnetwork information is partitioned from the host information in a corresponding IP address. Subnet masks for IP are the same length as the corresponding IP addresses (32 bits for IPv4 and 128 bits for IPv6). They are typically configured into a host or router in the same way as IP addresses—either statically (typical for routers) or using some dynamic system such as the <em>Dynamic Host Configuration Protocol</em> (DHCP). For IPv4, subnet masks may be written in the same way an IPv4 address is written (i.e., dotted-decimal).</p>
</div>
<div class="paragraph">
<p>Although not originally required to be arranged in this manner, today subnet masks are structured as some number of 1 bits followed by some number of 0 bits. Because of this arrangement, it is possible to use a shorthand format for expressing masks that simply gives the number of contiguous 1 bits in the mask (starting from the left). This format is now the most common format and is sometimes called the <strong>prefix length</strong>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. IPv4 subnet mask examples in various formats</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Dotted-Decimal Representation</th>
<th class="tableblock halign-left valign-top">Shorthand (Prefix Length)</th>
<th class="tableblock halign-left valign-top">Binary Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000000 00000000 00000000 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 00000000 00000000 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.192.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11000000 00000000 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11111111 00000000 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.254.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11111111 11111110 00000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.192</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11111111 11111111 11100000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111111 11111111 11111111 11111111</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. IPv6 subnet mask examples in various formats</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Hex Notation</th>
<th class="tableblock halign-left valign-top">Shorthand (Prefix Length)</th>
<th class="tableblock halign-left valign-top">Binary Representation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ffff:ffff:ffff:ffff::</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1111111111111111 1111111111111111
1111111111111111 1111111111111111
0000000000000000 0000000000000000
0000000000000000 0000000000000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff00::</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1111111100000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000000</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Masks are used by routers and hosts to determine where the network/subnetwork portion of an IP address ends and the host part begins. A bit set to 1 in the subnet mask means the corresponding bit position in an IP address should be considered part of a combined network/subnetwork portion of an address, which is used as the basis for forwarding datagrams. Conversely, a bit set to 0 in the subnet mask means the corresponding bit position in an IP address should be considered part of the host portion.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/ip-network-subnet.png" alt="ip network subnet" width="75%" height="75%">
</div>
<div class="title">Figure 2. An IP address can be combined with a subnet mask using a bitwise AND operation in order to form the network/subnetwork identifier (prefix) of the address used for routing. In this example, applying a mask of length 24 to the IPv4 address 128.32.1.14 gives the prefix 128.32.1.0/24.</div>
</div>
</div>
<div class="sect2">
<h3 id="variable-length-subnet-masks-vlsm">2.4. Variable-Length Subnet Masks (VLSM)</h3>
<div class="paragraph">
<p>It is possible to use a different-length subnet mask applied to the same network number in different portions of the same site. Although doing this complicates address configuration management, it adds flexibility to the subnet structure because different subnetworks may be set up with different numbers of hosts. <strong>Variable-length subnet masks</strong> (VLSM) are now supported by most hosts, routers, and routing protocols.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/vlsm.png" alt="Variable-Length Subnet Masks" width="75%" height="75%">
</div>
<div class="title">Figure 3. VLSM can be used to partition a network number into subnetworks with a differing number of hosts on each subnet. Each router and host is configured with a subnet mask in addition to its IP address. Most software supports VLSM, except for some older routing protocols (e.g., RIP version 1).</div>
</div>
<div class="paragraph">
<p>Recall that the number of hosts is constrained by the number of bits remaining in the IP address that are not used by the network/subnet number. For IPv4
and a /24 prefix, this allows for 32 – 24 = 8 bits (256 hosts); for /25, half as many (128 hosts); and for /26, half further still (64 hosts).</p>
</div>
<div class="paragraph">
<p>Note that each interface on each host and router depicted is now given both an IP address and a subnet mask, but the mask differs across the network topology.</p>
</div>
<div class="paragraph">
<p>With an appropriate dynamic routing protocol running among the routers (e.g., OSPF, IS-IS, RIPv2), traffic is able to flow correctly among hosts at the same site or to/from the outside of the site across the Internet.</p>
</div>
<div class="paragraph">
<p>Although it may not seem obvious, there is a common case where a subnetwork contains only two hosts. When routers are connected together by a point-to-point link requiring an IP address to be assigned at each end, it is common practice to use a /31 network prefix with IPv4, and it is now also a recommended practice to use a /127 prefix for IPv6 [RFC6164].</p>
</div>
</div>
<div class="sect2">
<h3 id="broadcast-address">2.5. Broadcast Address</h3>
<div class="paragraph">
<p>In each IPv4 subnetwork, a special address is reserved to be the <strong>subnet broadcast address</strong>. The subnet broadcast address is formed by setting the network/subnetwork portion of an IPv4 address to the appropriate value and all the bits in the Host field to 1.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/subnet-broadcast-address.png" alt="Subnet Broadcast Address" width="75%" height="75%">
</div>
<div class="title">Figure 4. The subnet broadcast address is formed by ORing the complement of the subnet mask with the IPv4 address. In this case of a /24 subnet mask, all of the remaining 32 – 24 = 8 bits are set to 1, giving a decimal value of 255 and the subnet broadcast address of 128.32.1.255.</div>
</div>
<div class="paragraph">
<p>Historically, a datagram using this type of address as its destination has also been known as a <strong>directed broadcast</strong>. Such a broadcast can, at least theoretically, be routed through the Internet as a single datagram until reaching the target subnetwork, at which point it becomes a collection of broadcast datagrams that are delivered to all hosts on the subnetwork.</p>
</div>
<div class="paragraph">
<p>In addition to the subnet broadcast address, the special-use address <em>255.255.255.255</em> is reserved as the <strong>local net broadcast</strong> (also called <strong>limited broadcast</strong>), which is never forwarded by routers.</p>
</div>
<div class="paragraph">
<p>Note that although routers may not forward broadcasts, subnet broadcasts and local net broadcasts destined for the same network to which a computer is attached should be expected to work unless explicitly disabled by end hosts. Such broadcasts do not require action by a router; <em>link-layer broadcast</em> mechanisms, if available, are used for supporting them.</p>
</div>
<div class="paragraph">
<p>Broadcast addresses are typically used with protocols such as UDP/IP (Chapter 10) or ICMP because these protocols do not involve two-party conversations as in TCP/IP.</p>
</div>
<div class="paragraph">
<p>IPv6 lacks any broadcast addresses; for places where broadcast addresses might be used in IPv4, IPv6 instead uses exclusively multicast addresses.</p>
</div>
<div class="listingblock">
<div class="title"><em>192.168.91.128</em></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span><span class="nb">sudo </span>sysctl net.ipv4.icmp_echo_ignore_broadcasts
net.ipv4.icmp_echo_ignore_broadcasts <span class="o">=</span> 1
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> net.ipv4.icmp_echo_ignore_broadcasts<span class="o">=</span>0
net.ipv4.icmp_echo_ignore_broadcasts <span class="o">=</span> 0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><em>192.168.91.137</em></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>ping <span class="nt">-b</span> <span class="nt">-c</span> 2 192.168.91.255
PING 192.168.91.255 <span class="o">(</span>192.168.91.255<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from 192.168.91.2: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>128 <span class="nb">time</span><span class="o">=</span>0.208 ms
64 bytes from 192.168.91.128: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.956 ms <span class="o">(</span>DUP!<span class="o">)</span>
64 bytes from 192.168.91.128: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.963 ms <span class="o">(</span>DUP!<span class="o">)</span>
64 bytes from 192.168.91.2: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>128 <span class="nb">time</span><span class="o">=</span>0.146 ms

<span class="nv">$ </span>ping <span class="nt">-b</span> <span class="nt">-c2</span> 255.255.255.255
PING 255.255.255.255 <span class="o">(</span>255.255.255.255<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
64 bytes from 192.168.91.2: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>128 <span class="nb">time</span><span class="o">=</span>0.304 ms
64 bytes from 192.168.91.128: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.320 ms <span class="o">(</span>DUP!<span class="o">)</span>
64 bytes from 192.168.91.128: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.320 ms <span class="o">(</span>DUP!<span class="o">)</span>
64 bytes from 192.168.91.2: <span class="nv">icmp_seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>128 <span class="nb">time</span><span class="o">=</span>0.235 ms</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ipv6-addresses-and-interface-identifiers">2.6. IPv6 Addresses and Interface Identifiers</h3>
<div class="paragraph">
<p>In addition to being longer than IPv4 addresses by a factor of 4, IPv6 addresses also have some additional structure. Special prefixes used with IPv6 addresses indicate the <strong>scope</strong> of an address. The scope of an IPv6 address refers to the portion of the network where it can be used.</p>
</div>
<div class="paragraph">
<p>Important examples of scopes include <strong>node-local</strong> (the address can be used only for communication on the same computer), <strong>link-local</strong> (used only among nodes on the same network link or IPv6 prefix), or <strong>global</strong> (Internet-wide).</p>
</div>
<div class="paragraph">
<p>In IPv6, most nodes have more than one address in use, often on the same network interface. Although this is supported in IPv4 as well, it is not nearly as common.</p>
</div>
<div class="paragraph">
<p>Link-local IPv6 addresses (and some global IPv6 addresses) use <strong>interface identifiers</strong> (IIDs) as a basis for unicast IPv6 address assignment.</p>
</div>
<div class="paragraph">
<p>IIDs are used as the low-order bits of an IPv6 address in all cases except where the address begins with the binary value 000, and as such they must be unique within the same network prefix.</p>
</div>
<div class="paragraph">
<p>IIDs are ordinarily 64 bits long and are formed either directly from the underlying link-layer MAC address of a network interface using a <strong>modified EUI-64 format</strong> [EUI64], or by another process that randomizes the value in hopes of providing some degree of privacy against address tracking.</p>
</div>
<div class="paragraph">
<p>In IEEE standards, EUI stands for <strong>extended unique identifier</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>EUI-64 identifiers start with a <em>24-bit</em> <strong>Organizationally Unique Identifier</strong> (OUI) followed by a <em>40-bit</em> <strong>extension identifier</strong> assigned by the organization, which is identified by the first 24 bits.</p>
</li>
<li>
<p>The OUIs are maintained and allocated by the IEEE registration authority [IEEERA].</p>
</li>
<li>
<p>EUIs may be "universally administered" or "locally administered."</p>
</li>
<li>
<p>In the Internet context, such addresses are typically of the universally administered variety.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Many IEEE standards-compliant network interfaces (e.g., Ethernet) have used shorter-format addresses (48-bit EUIs) for years. The only significant difference between the EUI-48 and EUI-64 formats is their length.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/EUI-48-and-EUI-64-formats.png" alt="EUI-48 and EUI-64 formats" width="75%" height="75%">
</div>
<div class="title">Figure 5. The EUI-48 and EUI-64 formats defined by the IEEE. These are used within IPv6 to form interface identifiers by inverting the u bit.</div>
</div>
<div class="paragraph">
<p>The OUI is 24 bits long and occupies the first 3 bytes of both EUI-48 and EUI-64 addresses. The low-order 2 bits of the first bytes of these addresses are designated the <em>u</em> and <em>g</em> bits, respectively.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>u</em> bit, when set, indicates that the address is locally administered.</p>
</li>
<li>
<p>The <em>g</em> bit, when set, indicates that the address is a group or multicast-type address.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An EUI-64 can be formed from an EUI-48 by copying the 24-bit OUI value from the EUI-48 address to the EUI-64 address, placing the 16-bit value, hex FFFE in the fourth and fifth bytes of the EUI-64 address, and then copying the remaining organization-assigned bits.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>ip a s ens32
2: ens32: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    <span class="nb">link</span>/ether 00:0c:29:85:26:07 brd ff:ff:ff:ff:ff:ff
    inet 192.168.91.137/24 brd 192.168.91.255 scope global dynamic ens32
       valid_lft 1073sec preferred_lft 1073sec
    inet6 fe80::20c:29ff:fe85:2607/64 scope <span class="nb">link
       </span>valid_lft forever preferred_lft forever</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we can see how the Ethernet’s hardware address <em>00:0c:29:85:26:07</em> is mapped to an IPv6 address.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, it is converted to EUI-64, forming the address <em>00:0c:29:ff:fe:85:26:07</em>.</p>
</li>
<li>
<p>Next, the <em>u</em> bit is inverted, forming the IID value <em>02:0c:29:ff:fe:85:26:07</em>.</p>
</li>
<li>
<p>To complete the link-local IPv6 address, we use the reserved link-local prefix <em>fe80::/10</em>.</p>
</li>
<li>
<p>Together, these form the complete address, <em>fe80::20c:29ff:fe85:2607</em>.</p>
</li>
<li>
<p>The presence of <em>/64</em> is the standard length used for identifying the subnetwork/host portion of an IPv6 address derived from an IID as required by [RFC4291].</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cidr-and-aggregation">3. CIDR and Aggregation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the early 1990s, after the adoption of subnet addressing to ease one form of growing pains, the Internet started facing a serious set of scaling problems. Three particular issues were considered so important as to require immediate attention:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>By 1994, over half of all class B addresses had already been allocated. It was expected that the class B address space would be exhausted by about 1995.</p>
</li>
<li>
<p>The 32-bit IPv4 address was thought to be inadequate to handle the size of the Internet anticipated by the early 2000s.</p>
</li>
<li>
<p>The number of entries in the global routing table (one per network number), about 65,000 in 1995, was growing. As more and more class A, B, and C routing entries appeared, routing performance would suffer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These three issues were attacked by a group in the IETF called ROAD (for ROuting and ADdressing), starting in 1992. They considered problems 1 and 3 to be of immediate concern, and problem 2 as requiring a long-term solution. The short-term solution they proposed was to effectively remove the class breakdown of IP addresses and also promote the ability to aggregate hierarchically assigned IP addresses. These measures would help problems 1 and 3. IPv6 was envisioned to deal with problem 2.</p>
</div>
<div class="sect2">
<h3 id="prefixes">3.1. Prefixes</h3>
<div class="paragraph">
<p>In order to help relieve the pressure on the availability of IPv4 addresses (especially class B addresses), the classful addressing scheme was generalized using a scheme similar to VLSM, and the Internet routing system was extended to support <strong>Classless Inter-Domain Routing</strong> (CIDR) [RFC4632]. This provided a way to conveniently allocate contiguous address ranges that contained more than 255 hosts but fewer than 65,536. That is, something other than single class B or multiple class C network numbers could be allocated to sites.</p>
</div>
<div class="paragraph">
<p>Using CIDR, any address range is not predefined as being part of a class but instead requires a mask similar to a subnet mask, sometimes called a <strong>CIDR mask</strong>. CIDR masks are not limited to a site but are instead visible to the global routing system. Thus, the core Internet routers must be able to interpret and process masks in addition to network numbers. This combination of numbers, called a <strong>network prefix</strong>, is used for both IPv4 and IPv6 address management.</p>
</div>
<div class="paragraph">
<p>Eliminating the predefined separation of network and host number within an IP address makes finer-grain allocation of IP address ranges possible.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>As with classful addressing, dividing the address spaces into chunks is most easily achieved by grouping numerically contiguous addresses for use as a type or for some particular special purpose.</p>
</li>
<li>
<p>Such groupings are now commonly expressed using a prefix of the address space.</p>
<div class="ulist">
<ul>
<li>
<p>An n-bit prefix is a predefined value for the first n bits of an address.</p>
</li>
<li>
<p>The value of n (the length of the prefix) is typically expressed as an integer in the range 0–32 for IPv4 and 0–128 for IPv6.</p>
</li>
<li>
<p>It is generally appended to the base IP address following a <em>/</em> character.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Examples of prefixes and their corresponding IPv4 or IPv6 address range</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Prefix (Binary)</th>
<th class="tableblock halign-left valign-top">Address Range</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0/0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00000000 00000000 00000000 00000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0–255.255.255.255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0/1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000000 00000000 00000000 00000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0–255.255.255.255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000000 00000000 00000000 00000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128.0.0.0–128.0.0.255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">198.128.128.192/27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11000110 10000000 10000000 11000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">198.128.128.192–198.128.128.223</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">165.195.130.107/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10100101 11000011 10000010 01101011</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">165.195.130.107</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2001:db8::/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0010000000000001 0000110110111000
0000000000000000 0000000000000000
0000000000000000 0000000000000000
0000000000000000 0000000000000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2001:db8::–2001:db8:ffff:ffff</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the table, the bits defined and fixed by the prefix are highlighted. The remaining bits may be set to any combination of 0s and 1s, thereby covering the possible address range.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clearly, a smaller prefix length corresponds to a larger number of possible addresses.</p>
</li>
<li>
<p>In addition, the earlier classful addressing approach is easily generalized by this scheme.</p>
<div class="ulist">
<ul>
<li>
<p>For example, the class <em>C</em> network number <em>192.125.3.0</em> can be written as the prefix <em>192.125.3.0/24</em> or <em>192.125.3/24</em>.</p>
</li>
<li>
<p>Classful <em>A</em> and <em>B</em> network numbers can be expressed using <em>/8</em> and <em>/16</em> prefix lengths, respectively.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Removing the classful structure of IP addresses made it possible to allocate IP address blocks in a wider variety of sizes. Doing so, however, did not address the third concern from the list of problems; it did not help to reduce the number of routing table entries.</p>
</div>
<div class="paragraph">
<p>A routing table entry tells a router where to send traffic.</p>
</div>
<div class="paragraph">
<p>Essentially, the router inspects the destination IP address in an arriving datagram, finds a matching routing table entry, and from the entry extracts the "<strong>next hop</strong>" for the datagram.</p>
</div>
<div class="paragraph">
<p>At the time, few techniques were known to dramatically reduce the number of routing table entries while maintaining shortest-path routes to all destinations in the Internet. The best-known approach was published in a study of hierarchical routing [KK77] in the late 1970s by Kleinrock and Kamoun. They observed that if the network topology were arranged as a <strong>tree</strong> and addresses were assigned in a way that was "sensitive" to this topology, very small routing tables could be used while still maintaining shortest-path routes to all destinations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/a-network-with-tree-topology.png" alt="A network with a tree topology" width="65%" height="65%">
</div>
<div class="title">Figure 6. In a network with a tree topology, network addresses can be assigned in a special way so as to limit the amount of routing information (“state”) that needs to be stored in a router. If addresses are not assigned in this way (left side), shortest-path routes cannot be guaranteed without storing an amount of state proportional to the number of nodes to be reached. While assigning addresses in a way that is sensitive to the tree topology saves state, if the network topology changes, a reassignment of addresses is generally required.</div>
</div>
<div class="paragraph">
<p>In this figure, circles represent routers and lines represent network links between them.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The root (top) of the tree on the left is the router labeled <em>19.12.4.8</em>. In order to know a next hop for every possible destination, it needs an entry for all the routers "below" it in the tree: <em>190.16.11.2</em>, <em>86.12.0.112</em>, <em>159.66.2.231</em>, <em>133.17.97.12</em>, <em>66.103.2.19</em>, <em>18.1.1.1</em>, <em>19.12.4.9</em>, and <em>203.44.23.198</em>. For any other destination, it simply routes to the cloud labeled "Other Parts of the Network." This results in a total of nine entries.</p>
</li>
<li>
<p>In contrast, the root of the right-hand tree is labeled <em>19.0.0.1</em> and requires only three entries in its routing table. Note that all of the routers on the left side of the right tree begin with the prefix <em>19.1</em> and all to the right begin with <em>19.2</em>. Thus, the table in router <em>19.0.0.1</em> need only show <em>19.1.0.1</em> as the next hop for any destination starting with <em>19.1</em>, whereas <em>19.2.0.1</em> is the next hop for any destination starting with <em>19.2</em>. Any other destination goes to the cloud labeled "Other Parts of the Network." This results in a total of three entries.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the Internet context, the hierarchical routing idea can be used in a specific way to reduce the number of Internet routing entries that would be required otherwise. This is accomplished by a procedure known as <strong>route aggregation</strong>. It works by joining multiple numerically adjacent IP prefixes into a single shorter prefix (called an <strong>aggregate</strong> or <strong>summary</strong>) that covers more address space.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/route-aggregation.png" alt="Route Aggregation" width="75%" height="75%">
</div>
<div class="title">Figure 7. In this example, the arrows indicate aggregation of two address prefixes to form one; the underlined prefixes are additions in each step. In the first step, 190.154.27.0/26 and 190.154.27.64.0/26 can be aggregated because they are numerically adjacent, but 190.154.27.192/26 cannot. With the addition of 190.154.27.128/26, they can all be aggregated together in two steps to form 190.154.27.0/24. With the final addition of the adjacent 190.154.26.0/24, the aggregate 190.154.26.0/23 is produced.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="special-use-addresses">4. Special-Use Addresses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Both the IPv4 and IPv6 address spaces include a few address ranges that are used for special purposes (and are therefore not used in assigning unicast addresses).</p>
</div>
<div class="paragraph">
<p>For both IPv4 and IPv6, address ranges not designated as special, multicast, or reserved are available to be assigned for unicast use. Some unicast address space
(prefixes <em>10/8</em>, <em>172.16/12</em>, and <em>192.168/16</em> for IPv4 and <em>fc00::/7</em> for IPv6) is reserved for building private networks. Addresses from these ranges can be used by cooperating hosts and routers within a site or organization, but not across the global Internet. Thus, these addresses are sometimes called <strong>nonroutable addresses</strong>. That is, they will not be routed by the public Internet.</p>
</div>
<div class="paragraph">
<p>The management of private, nonroutable address space is entirely a local decision. The IPv4 private addresses are very common in home networks and for the internal networks of moderately sized and large enterprises. They are frequently used in combination with <strong>network address translation</strong> (NAT), which rewrites IP addresses inside IP datagrams as they enter the Internet.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. IPv4 special-use addresses (defined January 2010)</caption>
<colgroup>
<col style="width: 13.3333%;">
<col style="width: 80%;">
<col style="width: 6.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Special Use</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts on the local network. May be used only as a source IP address.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1122]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.0/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address for private networks (intranets). Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1918]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.0/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internet host loopback addresses (same computer). Typically only 127.0.0.1 is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1122]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">169.254.0.0/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Link-local" addresses—used only on a single link and generally assigned automatically.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3927]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">172.16.0.0/12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address for private networks (intranets). Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1918]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.0.0.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IETF protocol assignments (IANA reserved).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5736]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.0.2.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEST-NET-1 addresses approved for use in documentation. Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5737]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.88.99.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used for 6to4 relays (anycast addresses).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3068]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.0.0/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address for private networks (intranets). Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1918]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">198.18.0.0/15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used for benchmarks and performance testing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC2544]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">198.51.100.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEST-NET-2. Approved for use in documentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5737]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">203.0.113.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEST-NET-3. Approved for use in documentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5737]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.0.0/4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4 multicast addresses (formerly class D); used only as destination addresses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">240.0.0.0/4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved space (formerly class E), except 255.255.255.255.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1112]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.255/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local network (limited) broadcast address.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC0919]
[RFC0922]</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. IPv6 special-use addresses (defined April 2008)</caption>
<colgroup>
<col style="width: 18.1818%;">
<col style="width: 72.7272%;">
<col style="width: 9.091%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Special Use</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::/0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default route entry. Not used for addressing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5156]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::/128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unspecified address; may be used as a source IP address.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::1/128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IPv6 host loopback address; not used in datagrams sent outside the local host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::ffff:0:0/96</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4-mapped addresses. Such addresses never appear in packet headers. For internal host use only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">::{ipv4-address}/96</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4-compatible addresses. Deprecated; not to be used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2001::/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teredo addresses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4380]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2001:10::/28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlay Routable Cryptographic Hash Identifiers. Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4843]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2001:db8::/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address range used for documentation and for examples. Such addresses never appear on the public Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3849]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2002::/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6to4 addresses of 6to4 tunnel relays.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3056]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3ffe::/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by 6bone experiments. Deprecated; not to be used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3701]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5f00::/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by 6bone experiments. Deprecated; not to be used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3701]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fc00::/7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique, local unicast addresses; not used on the global Internet.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4193]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fe80::/10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link-local unicast addresses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff00::/8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv6 multicast addresses; used only as destination addresses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="multicast-addresses">4.1. Multicast Addresses</h3>
<div class="paragraph">
<p>Multicast addressing is supported by IPv4 and IPv6. An IP multicast address (also called <strong>group</strong> or <strong>group address</strong>) identifies a group of host interfaces, rather than a single one. Generally speaking, the group could span the entire Internet.</p>
</div>
<div class="paragraph">
<p>The portion of the network that a single group covers is known as the groupi&#8217;s <strong>scope</strong> [RFC2365]. Common scopes include <strong>node-local</strong> (same computer), <strong>link-local</strong> (same subnet), <strong>site-local</strong> (applicable to some site), <strong>global</strong> (entire Internet), and <strong>administrative</strong>.</p>
</div>
<div class="paragraph">
<p>Administrative scoped addresses may be used in an area of the network that has been manually configured into routers. A site administrator may configure routers as admin-scope boundaries, meaning that multicast traffic of the associated group is not forwarded past the router. Note that the site-local and administrative scopes are available for use only with multicast addressing.</p>
</div>
<div class="paragraph">
<p>Under software control, the protocol stack in each Internet host is able to join or leave a multicast group. When a host sends something to a group, it creates a datagram using one of its own (unicast) IP addresses as the source address and a multicast IP address as the destination. All hosts in scope that have joined the group should receive any datagrams sent to the group. The sender is not generally aware of the hosts receiving the datagram unless they explicitly reply. Indeed, the sender does not even know in general how many hosts are receiving its datagrams.</p>
</div>
</div>
<div class="sect2">
<h3 id="ipv4-multicast-addresses">4.2. IPv4 Multicast Addresses</h3>
<div class="paragraph">
<p>For IPv4, the class D space (<em>224.0.0.0</em>–<em>239.255.255.255</em>) with 28 bits free has been reserved for supporting multicast.</p>
</div>
<div class="paragraph">
<p>The blocks of addresses up to <em>224.255.255.255</em> are allocated for the exclusive use of certain application protocols or organizations. These are allocated as the result of action by the IANA or by the IETF.</p>
</div>
<div class="paragraph">
<p>The local network control block is limited to the local network of the sender; datagrams sent to those addresses are never forwarded by multicast routers. The All Hosts group (<em>224.0.0.1</em>) is one group in this block.</p>
</div>
<div class="paragraph">
<p>The internetwork control block is similar to the local network control range but is intended for control traffic that needs to be routed off the local link. An example from this block is the Network Time Protocol (NTP) multicast group (<em>224.0.1.1</em>) [RFC5905].</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Major sections of IPv4 class D address space used for supporting multicast</caption>
<colgroup>
<col style="width: 23.0769%;">
<col style="width: 69.2307%;">
<col style="width: 7.6924%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Range (Inclusive)</th>
<th class="tableblock halign-left valign-top">Special Use</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.0.0–224.0.0.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local network control; not forwarded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.1.0–224.0.1.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internetwork control; forwarded normally</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.2.0–224.0.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ad hoc block I</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.1.0.0–224.1.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.2.0.0–224.2.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SDP/SAP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4566]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.3.0.0–224.4.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ad hoc block II</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.5.0.0–224.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IP4MA]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">225.0.0.0–231.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IP4MA]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">232.0.0.0–232.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source-specific multicast (SSM)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4607]
[RFC4608]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">233.0.0.0–233.251.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GLOP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3180]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">233.252.0.0–233.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ad hoc block III 233.252.0.0/24 is reserved for documentation)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5771]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">234.0.0.0–234.255.255.255
235.0.0.0–238.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicast-prefix-based IPv4 multicast addresses
Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC6034]
IP4MA]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">239.0.0.0–239.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrative scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC2365]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ipv6-multicast-addresses">4.3. IPv6 Multicast Addresses</h3>
<div class="paragraph">
<p>For IPv6, which is considerably more aggressive in its use of multicast, the prefix <em>ff00::/8</em> has been reserved for multicast addresses, and 112 bits are available for holding the group number.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/ipv6-multicast-address-format.png" alt="IPv6 Multicast Address Format" width="75%" height="75%">
</div>
<div class="title">Figure 8. The base IPv6 multicast address format includes 4 flag bits (0, reserved; R, contains rendezvous point; P, uses unicast prefix; T, is transient). The 4-bit Scope value indicates the scope of the multicast (global, local, etc.). The Group ID is encoded in the low-order 112 bits. If the P or R bit is set, an alternative format is used.</div>
</div>
<table class="tableblock frame-all grid-all" style="width: 55%;">
<caption class="title">Table 11. Values of the IPv6 Scope field</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 88.8889%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface-/machine-local</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link-/subnet-local</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site-local</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6–7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unassigned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Organizational-local</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9–d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unassigned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Many IPv6 multicast addresses allocated by the IANA for permanent use intentionally span multiple scopes. Each of these is defined with a certain offset relative to every scope (such addresses are called <strong>scope-relative</strong> or <strong>variable-scope</strong> for this reason). For example, the variable-scope multicast address <em>ff0x::101</em> is reserved for NTP servers by [IP6MA]. The <em>x</em> indicates variable scope.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Example permanent variable-scope IPv6 multicast address reservations for NTP (101)</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Address</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff01::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers on the same machine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers on the same link/subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff04::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers within some administratively defined scope</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff05::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers at the same site</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff08::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers at the same organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0e::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All NTP servers in the Internet</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As with IPv4, there are a number of reserved IPv6 multicast addresses. These addresses are grouped by scope, except for the variable-scope addresses mentioned before.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Reserved addresses within the IPv6 multicast address space</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Address</th>
<th class="tableblock halign-left valign-top">Scope</th>
<th class="tableblock halign-left valign-top">Special Use</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff01::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff01::2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff01::fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mDNSv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IDChes]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DVMRP routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC1075]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSPFIGP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC2328]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSPFIGP designated routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC2328]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RIPng routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC2080]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EIGRP routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[EIGRP]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PIM routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5059]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MLDv2-capable routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3810]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::6a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All snoopers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4286]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::6d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LL-MANET-routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5498]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mDNSv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IDChes]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::1:2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All DHCP agents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3315]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::1:3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLMNR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4795]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::1:ffxx:xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solicited-node address range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff05::2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All routers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff05::fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mDNSv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IDChes]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff05::1:3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All DHCP servers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC3315]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0x::</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4291]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0x::fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mDNSv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[IDChes]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0x::101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5905]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0x::133</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate Server Access Protocol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5352]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff0x::18c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All ACs address (CAPWAP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC5415]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff3x::/32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Special)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSM block</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[RFC4607]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="anycast-address">4.4. Anycast Address</h3>
<div class="paragraph">
<p>An <strong>anycast address</strong> is a unicast IPv4 or IPv6 address that identifies a different host depending on where in the network it is used. This is accomplished by configuring Internet routers to advertise the same unicast routes from multiple locations in the Internet. Thus, an anycast address refers not to a single host in the Internet, but to the "most appropriate" or "closest" single host that is responding to the anycast address.</p>
</div>
<div class="paragraph">
<p>Anycast addressing is used most frequently for finding a computer that provides a common service [RFC4786].</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="allocation">5. Allocation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IP address space is <strong>allocated</strong>, usually in large chunks, by a collection of hierarchically organized <strong>authorities</strong>.</p>
</div>
<div class="paragraph">
<p>The authorities are generally organizations that allocate address space to various owners—usually ISPs or other smaller authorities.</p>
</div>
<div class="paragraph">
<p>Authorities are most often involved in allocating portions of the global unicast address space, but other types of addresses (multicast and special-use) are also sometimes allocated. The authorities can make allocations to users for an undetermined amount of time, or for a limited time (e.g., for running experiments).</p>
</div>
<div class="paragraph">
<p>The top of the hierarchy is the IANA [IANA], which has wide-ranging responsibility for allocating IP addresses and other types of numbers used in the Internet protocols.</p>
</div>
<div class="sect2">
<h3 id="unicast">5.1. Unicast</h3>
<div class="paragraph">
<p>For unicast IPv4 and IPv6 address space, the IANA delegates much of its allocation authority to a few <strong>regional Internet registries</strong> (RIRs). The RIRs coordinate with each other through an organization formed in 2003 called the <strong>Number Resource Organization</strong> (NRO).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Regional Internet registries that participate in the NRO</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">RIR Name</th>
<th class="tableblock halign-left valign-top">Area of Responsibility</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AfriNIC—African Network Information Center</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Africa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.afrinic.net" class="bare">http://www.afrinic.net</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APNIC—Asia Pacific Network Information Center</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asia/Pacific Area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.apnic.net" class="bare">http://www.apnic.net</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ARIN—American Registry for Internet Numbers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">North America</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.arin.net" class="bare">http://www.arin.net</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LACNIC—Regional Latin America and Caribbean IP Address Registry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latin America and some Caribbean islands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://lacnic.net/en/index.html" class="bare">http://lacnic.net/en/index.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RIPE NCC—Réseaux IP Européens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Europe, Middle East, Central Asia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.ripe.net" class="bare">http://www.ripe.net</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These entities typically deal with relatively large address blocks. They allocate address space to smaller registries operating in countries (e.g., Australia and Singapore) and to large ISPs.</p>
</div>
<div class="paragraph">
<p>ISPs, in turn, provide address space to their customers and themselves. When users sign up for Internet service, they are ordinarily provided a (typically small) fraction or range of their ISP&#8217;s address space in the form of an address prefix.</p>
</div>
<div class="paragraph">
<p>These address ranges are owned and managed by the customer&#8217;s ISP and are called <strong>provider-aggregatable</strong> (PA) addresses because they consist of one or more prefixes that can be aggregated with other prefixes the ISP owns. Such addresses are also sometimes called <strong>non-portable</strong> addresses.</p>
</div>
<div class="paragraph">
<p>Switching providers typically requires customers to change the IP prefixes on all computers and routers they have that are attached to the Internet (an often unpleasant operation called renumbering).</p>
</div>
<div class="paragraph">
<p>An alternative type of address space is called <strong>provider-independent</strong> (PI) address space. Addresses allocated from PI space are allocated to the user directly and may be used with any ISP. However, because such addresses are owned by the customer, they are not numerically adjacent to the ISP&#8217;s own addresses and are therefore not aggregatable.</p>
</div>
<div class="paragraph">
<p>An ISP being asked to provide routing for a customer&#8217;s PI addresses may require additional payment for service or simply not agree to support such a configuration. In some sense, an ISP that agrees to provide routing for a customer&#8217;s PI addresses is taking on an extra cost relative to other customers by having to increase the size of its routing tables. On the other hand, many sites prefer to use PI addresses, and might be willing to pay extra for them, because it helps to avoid the need to renumber when switching ISPs (avoiding what has become known as provider lock).</p>
</div>
<div class="paragraph">
<p>It is possible to use the Internet WHOIS service to determine how address space has been allocated. For example, we can form a query for information about the
IPv4 address <em>72.1.140.203</em> by accessing the corresponding URL <a href="http://whois.arin.net/rest/ip/72.1.140.203.txt" class="bare">http://whois.arin.net/rest/ip/72.1.140.203.txt</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">NetRange: 72.1.140.192 - 72.1.140.223
CIDR: 72.1.140.192/27
OriginAS:
NetName: SPEK-SEA5-PART-1
NetHandle: NET-72-1-140-192-1
Parent: NET-72-1-128-0-1
NetType: Reassigned
RegDate: 2005-06-29
Updated: 2005-06-29
Ref: http://whois.arin.net/rest/net/NET-72-1-140-192-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we see that the address <em>72.1.140.203</em> is really part of the network called SPEK-SEA5-PART-1, which has been allocated the address range <em>72.1.140.192/27</em>.</p>
</div>
<div class="paragraph">
<p>Furthermore, we can see that SPEK-SEA5-PART-1&#8217;s address range is a portion of the PA address space called NET-72-1-128-0-1. We can formulate a query for information about this network by visiting the URL <a href="http://whois.arin.net/rest/net/NET-72-1-128-0-1.txt" class="bare">http://whois.arin.net/rest/net/NET-72-1-128-0-1.txt</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">NetRange: 72.1.128.0 - 72.1.191.255
CIDR: 72.1.128.0/18
OriginAS:
NetName: SPEAKEASY-6
NetHandle: NET-72-1-128-0-1
Parent: NET-72-0-0-0-0
NetType: Direct Allocation
RegDate: 2004-09-09
Updated: 2009-05-19
Ref: http://whois.arin.net/rest/net/NET-72-1-128-0-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>This record indicates that the address range <em>72.1.128.0/18</em> (called by the "handle" or name NET-72-1-128-0-1) has been directly allocated out of the address range <em>72.0.0.0/8</em> managed by ARIN. More details on data formats and the various methods ARIN supports for WHOIS queries can be found at.</p>
</div>
<div class="paragraph">
<p>We can look at a different type of result using one of the other RIRs. For example, if we search for information regarding the IPv4 address <em>193.5.93.80</em> using the Web query interface at <a href="http://www.ripe.net/whois" class="bare">http://www.ripe.net/whois</a>, we obtain the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">% This is the RIPE Database query service.
% The objects are in RPSL format.
%
% The RIPE Database is subject to Terms and Conditions.
% See http://www.ripe.net/db/support/db-terms-conditions.pdf
%
% Note: This output has been filtered.
% To receive output for a database update, use the "-B" flag.
% Information related to '193.5.88.0 - 193.5.95.255'
inetnum: 193.5.88.0 - 193.5.95.255
netname: WIPONET
descr: World Intellectual Property Organization
descr: UN Specialized Agency
descr: Geneva
country: CH
admin-c: AM4504-RIPE
tech-c: AM4504-RIPE
status: ASSIGNED PI
mnt-by: CH-UNISOURCE-MNT
mnt-by: DE-COLT-MNT
source: RIPE # Filtered</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we can see that the address <em>193.5.93.80</em> is a portion of the <em>193.5.88.0/21</em> block allocated to WIPO.</p>
</div>
<div class="paragraph">
<p>Note that the status of this block is <strong>ASSIGNED PI</strong>, meaning that this particular block of addresses is of the provider-independent variety.</p>
</div>
<div class="paragraph">
<p>The reference to <strong>RPSL</strong> indicates that the database records are in the <strong>Routing Policy Specification Language</strong> [RFC2622][RFC4012], used by ISPs to express their routing policies. Such information allows network operators to configure routers to help minimize Internet routing instabilities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>whois 220.196.60.2
<span class="go">% [whois.apnic.net]
% Whois data copyright terms    http://www.apnic.net/db/dbcopyright.html

% Information related to '220.192.0.0 - 220.207.255.255'

% Abuse contact for '220.192.0.0 - 220.207.255.255' is 'ipas@cnnic.cn'

inetnum:        220.192.0.0 - 220.207.255.255
netname:        UNICOM
descr:          China Unicom
descr:          No.21 Financial Street,Xicheng District,
descr:          Beijing 100140 ,P.R.China
country:        CN
admin-c:        YW6851-AP
tech-c:         YW6851-AP
abuse-c:        AC1601-AP
status:         ALLOCATED PORTABLE
mnt-by:         MAINT-CNNIC-AP
mnt-lower:      MAINT-CNNIC-AP
mnt-routes:     MAINT-CNCGROUP-RR
mnt-irt:        IRT-CNNIC-CN
last-modified:  2021-06-16T01:29:30Z
source:         APNIC</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unicast-address-assignment">6. Unicast Address Assignment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once a site has been allocated a range of unicast IP addresses, typically from its ISP, the site or network administrator must determine how to assign addresses in
the address range to each network interface and how to set up the subnet structure.</p>
</div>
<div class="sect2">
<h3 id="single-providerno-networksingle-address">6.1. Single Provider/No Network/Single Address</h3>
<div class="paragraph">
<p>The simplest type of Internet service that can be obtained today is to receive a single IP address (typically IPv4 only in the United States) from an ISP to be used with a single computer. For services such as DSL, the single address might be assigned as the end of a point-to-point link and might be temporary.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">Linux% ifconfig ppp0 <span class="c"># ip a</span>
ppp0 Link encap:Point-to-Point Protocol
inet addr:71.141.244.213
P-t-P:71.141.255.254 Mask:255.255.255.255
UP POINTOPOINT RUNNING NOARP MULTICAST MTU:1492 Metric:1
RX packets:33134 errors:0 dropped:0 overruns:0 frame:0
TX packets:41031 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:3
RX bytes:17748984 <span class="o">(</span>16.9 MiB<span class="o">)</span> TX bytes:9272209 <span class="o">(</span>8.8 MiB<span class="o">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>netstat <span class="nt">-ng</span> <span class="c"># ip maddr</span>
IPv6/IPv4 Group Memberships
Interface       RefCnt Group
<span class="nt">---------------</span> <span class="nt">------</span> <span class="nt">---------------------</span>
lo              1      224.0.0.251
lo              1      224.0.0.1
ppp0            1      224.0.0.251
ppp0            1      224.0.0.1
lo              1      ff02::fb
lo              1      ff02::1
lo              1      ff01::1
ppp0            1      ff02::fb
ppp0            1      ff02::1
ppp0            1      ff01::1</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. A user&#8217;s computer connects to the Internet over DSL assigned as the end of a point-to-point link.</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Device</th>
<th class="tableblock halign-left valign-top">Address</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4 loopback address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv6 loopback address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0/lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Hosts multicast address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0/lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">224.0.0.251</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4 mDNS (multicast DNS) service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0/lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff01::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Nodes IPv6 multicast address (Node)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0/lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Nodes IPv6 multicast address (Link)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0/lo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ff02::fb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv6 mDNSv6 (multicast DNS) service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ppp0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">71.141.244.213</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPv4 address assigned to the computer that connected to the Internet over DSL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="single-providersingle-networksingle-address">6.2. Single Provider/Single Network/Single Address</h3>
<div class="paragraph">
<p>Many Internet users who own more than one computer find that having only a single computer attached to the Internet is not an ideal situation. As a result, they have home LAN or WLAN networks and use either a router or a computer acting as a router to provide connectivity to the Internet. Such configurations are very similar to the single-computer case, except the router forwards packets from the home network to the ISP and also performs <strong>NAT</strong> (also called <strong>Internet Connection Sharing</strong> (ICS) in Windows) by rewriting the IP addresses in packets being exchanged with the customer&#8217;s ISP. From the ISP&#8217;s point of view, only a single IP address has been used.</p>
</div>
<div class="paragraph">
<p>Today, much of this activity is automated, so the need for manual address configuration is minimal. The routers provide automatic address assignment to the home clients using <strong>DHCP</strong>. They also handle address assignment for the link set up with the ISP if necessary.</p>
</div>
</div>
<div class="sect2">
<h3 id="single-providermultiple-networksmultiple-addresses">6.3. Single Provider/Multiple Networks/Multiple Addresses</h3>
<div class="paragraph">
<p>Many organizations find that the allocation of a single unicast address, especially if it is only temporarily assigned, is insufficient for their Internet access needs.</p>
</div>
<div class="paragraph">
<p>In particular, organizations intending to run Internet servers (such as Web sites) generally wish to have an IP address that does not change over time. These sites also often have multiple LANs; some of them are internal (separated from the Internet by firewalls and NAT devices), and others may be external (providing services to the Internet). For such networks, there is typically a site or network administrator who must decide how many IP addresses the site requires, how to structure subnets at the site, and which subnets should be internal and which external.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/a-typical-small-to-medum-size-enterprise-network.png" alt="A typical small to medium-size enterprise network" width="55%" height="55%">
</div>
<div class="title">Figure 9. A typical small to medium-size enterprise network. The site has been allocated 64 public (routable) IPv4 addresses in the range 128.32.2.64/26. A DMZ network holds servers that are visible to the Internet. The internal router provides Internet access for computers internal to the enterprise using NAT.</div>
</div>
</div>
<div class="sect2">
<h3 id="multiple-providersmultiple-networksmultiple-addresses-multihoming">6.4. Multiple Providers/Multiple Networks/Multiple Addresses (Multihoming)</h3>
<div class="paragraph">
<p>Some organizations that depend on Internet access for their continued operations attach to the Internet using more than one provider (called <strong>multihoming</strong>) in order to provide for redundancy in case of failure, or for other reasons.</p>
</div>
<div class="paragraph">
<p>Because of CIDR, organizations with a single ISP tend to have PA IP addresses associated with that ISP. If they obtain a second ISP, the question arises as to what IP addresses should be used in each of the hosts.</p>
</div>
<div class="paragraph">
<p>Some guidance has been developed for operating with multiple ISPs, or when transitioning from one to another (which raises some similar concerns). For IPv4, [RFC4116] discusses how either PI or PA addresses can be used for multihoming.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/internet-address-architecture/pa-pi-multihoming.png" alt="Provider-aggregatable and provider-independent IPv4 addresses used in a hypothetical multihomed enterprise" width="55%" height="55%">
</div>
<div class="title">Figure 10. Provider-aggregatable and provider-independent IPv4 addresses used in a hypothetical multihomed enterprise. Site operators tend to prefer using PI space if it is available. ISPs prefer PA space because it promotes prefix aggregation and reduces routing table size.</div>
</div>
<div class="paragraph">
<p>Here, a (somewhat) fictitious site S has two ISPs, P1 and P2.</p>
</div>
<div class="paragraph">
<p>If it uses PA address space from P1&#8217;s block (<em>12.46.129.0/25</em>), it advertises this prefix at points C and D to P1 and P2, respectively. The prefix can be aggregated by P1 into its <em>12/8</em> block in advertisements to the rest of the Internet at point A, but P2 is not able to aggregate it at point B because it is not numerically adjacent to its own prefix (<em>137.164/16</em>).</p>
</div>
<div class="paragraph">
<p>In addition, from the point of view of some host in the other parts of the Internet, traffic for <em>12.46.129.0/25</em> tends to go through ISP P2 rather than ISP P1 because the prefix for site S is longer than when it goes through P1. This is a consequence of the way the <strong>longest matching prefix</strong> algorithm works for Internet routing.</p>
</div>
<div class="paragraph">
<p>In essence, a host in the other parts of the Internet could reach the address <em>12.46.129.1</em> via either a matching prefix <em>12.0.0.0/8</em> at point A or the prefix <em>12.46.129.0/25</em> at point B. Because each prefix matches (i.e., contains a common set of prefix bits with the destination address <em>12.46.129.1</em>), the one with the larger or longer mask (larger number of matching bits) is preferred, which in this case is P2. Thus, P2 is in the position of being unable to aggregate the prefix from S and also winds up carrying most of S&#8217;s traffic.</p>
</div>
<div class="paragraph">
<p>If site S decides to use PI space instead of PA space, the situation is more symmetric.</p>
</div>
<div class="paragraph">
<p>However, no aggregation is possible. In this case, the PI prefix <em>198.134.135.0/24</em> is advertised to P1 and P2 at points C and D, respectively, but neither ISP is able to aggregate it because it is not numerically adjacent to either of the ISPs' address blocks. Thus, both ISPs advertise the identical prefix <em>198.134.135.0/24</em> at points A and B. In this fashion the "natural" shortest-path computations in Internet routing can take place, and site S can be reached by whichever ISP is closer to the host sending to it. In addition, if site S decides to switch ISPs, it does not have to change its assigned addresses. Unfortunately, the inability to aggregate such addresses can be a concern for future scalability of the Internet, so PI space is in relatively short supply.</p>
</div>
<div class="paragraph">
<p>Multihoming for IPv6 has been the subject of study within the IETF for some time, resulting in the <strong>Multi6</strong> architecture [RFC4177] and the <strong>Shim6</strong> protocol [RFC5533].</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">7. References</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fall, Kevin R._ Stevens, W. Richard_ Wright, Gary R - TCP_IP Illustrated, Volume 1_ The Protocols (2012, Addison-Wesley, Pearson)</p>
</li>
</ol>
</div>
</div>
</div>
  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2022/11/08/linux-as-router/">&laquo; Linux as Router</a>
      
    </li>
    <li>
      
      <a href="/2022/11/17/tcp-ip-link-layer/">TCP/IP: Link Layer &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>

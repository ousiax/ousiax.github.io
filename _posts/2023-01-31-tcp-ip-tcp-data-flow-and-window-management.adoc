= TCP/IP: TCP Data Flow and Window Management
:page-layout: post
:page-categories: ['networking']
:page-tags: ['networking', 'tcp']
:page-date: 2023-01-31 16:22:46 +0800
:page-revdate: 2023-01-31 16:22:46 +0800
:toc: preamble
:toclevels: 4
:sectnums:
:sectnumlevels: 4

We now examine the dynamics of TCP data transfers, focusing initially on _interactive_ connections and then introducing flow control and associated window management procedures that are used in conjunction with congestion control for bulk data transfers (i.e., _noninteractive_ communications).

An _interactive_ TCP connection is one in which user input such as keystrokes, short messages, or joystick/mouse movements need to be delivered between a client and a server.

* If small segments are used to carry such user input, the protocol imposes more overhead because there are fewer useful payload bytes per packet exchanged.
* On the other hand, filling packets with more data usually requires them to be delayed, which can have a negative impact on delay-sensitive applications such as online games and collaboration tools.

== Interactive Communication

Studies of TCP traffic usually find that 90% or more of all TCP segments contain _bulk data_ (e.g., Web, file sharing, electronic mail, backups) and the remaining portion contains _interactive data_ (e.g., remote login, network games).

* Bulk data segments tend to be relatively large (1500 bytes or larger), while interactive data segments tend to be much smaller (tens of bytes of user data).

* TCP handles both types of data using the same protocol and packet format, but different algorithms come into play for each.

Let us look at the flow of data when we type an interactive command on an ssh connection.

TIP: Secure shell (`ssh`) is a remote login protocol that provides strong security (privacy and authentication based on cryptography). It has mostly replaced the earlier UNIX `rlogin` and Telnet programs that provide remote login service but without strong security.

.One possible way to remotely echo an interactive keystroke is a separate ACK and echo packet (a). A typical TCP coalesces the ACK for the data byte and the echo of the byte into a single packet (using _delayed acknowledgments_ with _piggybacking_) (b).
image::/assets/tcp-ip/tcp-data-flow-and-window-management/ssh-echo.png[,75%,75%]

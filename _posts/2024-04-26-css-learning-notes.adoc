= CSS Learning Notes
:page-layout: post
:page-categories: ['css']
:page-tags: ['css']
:page-date: 2024-04-26 14:09:38 +0800
:page-revdate: 2024-04-26 14:09:38 +0800
:toc: preamble
:toclevels: 4
:sectnums:
:sectnumlevels: 4

https://developer.mozilla.org/en-US/docs/Web/CSS[Cascading Style Sheets (CSS)] is a stylesheet language used to describe the presentation of a document written in HTML or XML (including XML dialects such as SVG, MathML or XHTML). CSS describes how elements should be rendered on screen, on paper, in speech, or on other media. 

CSS is among the core languages of the open web and is standardized across Web browsers according to https://www.w3.org/Style/CSS/#specs[W3C specifications].

== CSS syntax

CSS is a rule-based language. A CSS rule is a set of declarations, which take the form of https://developer.mozilla.org/en-US/docs/Glossary/Property/CSS[propertie] and value pairs, associated with a https://developer.mozilla.org/en-US/docs/Glossary/CSS_Selector[selector] that describes what elements in a document the rule will match. CSS properties and values are case-insensitive.

image::https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics/css-declaration-small.png[CSS p declaration color red,25%,25%]

TIP: If a property is unknown, or if a value is not valid for a given property, the declaration is processed as invalid. It is completely ignored by the browser's CSS engine.

TIP: In CSS (and other web standards), it has been agreed that US spelling is the standard where there is language variation or uncertainty. For example, `colour` should be spelled `color`, as `colour` will not work.

[TIP]
====
CSS comments begin with `+/*+` and end with `+*/+`.

```css
/* This is a single-line comment */
p {
  color: /*blue*/red; /* Add comments in the middle or the end of a code line */
  /* This is
     a multi-line
     comment */
  font-size: 1em;
}
```
====

Here is an example that makes every HTML paragraph yellow against a black background:

```css
/* The selector "p" indicates that all paragraphs in the document will be affected by that rule */
p {
  /* The "color" property defines the text color, in this case red. */
  color: red;

  /* The "background-color" property defines the background color, in this case black. */
  background-color: black;
}
```

== External, internal, and inline stylesheet

image::https://developer.mozilla.org/en-US/docs/Learn/CSS/First_steps/How_CSS_works/rendering.svg[Rendering process overview,45%,45%]

* An *external stylesheet* contains CSS in a separate file with a `.css` extension inside the `<head>` HTML element, which is the most common and useful method of bringing CSS to a document.
+
```html
<!-- Inside a subdirectory called styles inside the current directory -->
<link rel="stylesheet" href="styles/style.css" />

<!-- Inside a subdirectory called general, which is in a subdirectory called 
     styles, inside the current directory -->
<link rel="stylesheet" href="styles/general/style.css" />

<!-- Go up one directory level, then inside a subdirectory called styles -->
<link rel="stylesheet" href="../styles/style.css" />

<!-- CDN links -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
       integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
       crossorigin="anonymous" />
```
+
TIP: The `rel` stands for "relationship", and is one of the key features of the `<link>` element — the value denotes how the item being linked to is related to the containing document.


* An *internal stylesheet* resides within an HTML document inside a `<style>` element.
+
TIP: The `<style>` element must be included inside the <head> of the document. In general, it is better to put the styles in external stylesheets and apply them using `<link>` elements.
+
```html
<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <title>My CSS experiment</title>
    <style>
      h1 {
        color: blue;
        background-color: yellow;
        border: 1px solid black;
      }

      p {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>Hello World!</h1>
    <p>This is my first CSS example</p>
  </body>
</html>
```

* The *inline styles* are CSS declarations that affect a single HTML element, contained within a `style` attribute. 
+
NOTE: Note that it is recommended for styles to be defined in a separate file or files.
+
```html
<h1 style="color: blue; background-color: yellow; border: 1px solid black;">
  Hello World!
</h1>
<p style="color:red;">This is my first CSS example</p>
```

== CSS building blocks

=== CSS selectors

A CSS selector is the first part of a CSS Rule. It is a pattern of elements and other terms that tell the browser which HTML elements should be selected to have the CSS property values inside the rule applied to them. The element or elements which are selected by the selector are referred to as the _subject of the selector_.

If there are more than one thing which uses the same CSS then the individual selectors can be combined into a selector list so that the rule is applied to all of the individual selectors. For example, the following two separate rules:

```css
h1 {
  color: blue;
}

.special {
  color: blue;
}
```

could be combined into a selector list:

```css
h1, .special {
  color: blue;
}
```

[TIP]
====
When you group selectors in this way, if any selector is syntactically invalid, the whole rule will be ignored.

```css
h1, ..special {
  color: blue;
}
```
====

==== Type, class, and ID selectors

* A *type selector* is sometimes referred to as a _tag name selector_ or _element selector_ because it selects an HTML tag/element in the document. 
+
```css
span {
  background-color: yellow;
}

strong, em {
  color: rebeccapurple;
}
```

* The *universal selector* is indicated by an asterisk (`*`). It selects everything in the document (or inside the parent element if it is being chained together with another element and a descendant combinator).
+
```css
/* A reset stylesheet to remove the margins on all elements. */
* {
  margin: 0;
}
```
+
```css
/* It is selecting any element which is the first-child of an <article> element, or
   the first-child of any descendant element of <article>. */
article *:first-child {
  font-weight: bold;
}
```

* The _case-sensitive_ *class selector* starts with a dot (`.`) character. It will select everything in the document with that class applied to it.
+
```css
/* All of the elements that have the class applied are highlighted. */
.highlight {
  background-color: yellow;
}
```
+
```html
<h1 class="highlight">Class selectors</h1>
```
+
```css
/* Targeting classes on particular elements. */
span.highlight {
  background-color: yellow;
}

h1.highlight {
  background-color: pink;
}
```
+
```css
/* Target an element if it has more than one class applied. */
.notebox {
  border: 4px solid #666;
  padding: .5em;
}

.notebox.warning {
  border-color: orange;
  font-weight: bold;
}

.notebox.danger {
  border-color: red;
  font-weight: bold;
}
```
+
```html
<div class="notebox">This is an informational note.</div>
<div class="notebox warning">This note shows a warning.</div>
<div class="notebox danger">This note shows danger!</div>
<div class="danger">This won't get styled — it also needs to have the notebox class.</div>
```

* The _case-sensitive_ *ID selector* begins with a `#` rather than a dot character, but is used in the same way as a class selector. However, an ID can be used only once per page, and elements can only have a single id value applied to them.
+
```css
#one {
  background-color: yellow;
}

h1#heading {
  color: rebeccapurple;
}
```
+
```html
<h1 id="heading">ID selector</h1>
<p id="one">Veggies es bonus vobis, proinde vos postulo essum magis
    kohlrabi welsh onion daikon amaranth tatsoi tomatillo melon azuki
    bean garlic.</p>
```
+
TIP: Using the same ID multiple times in a document may appear to work for styling purposes, but don't do this. It results in invalid code, and will cause strange behavior in many places.

==== Attribute selectors

* The *presence and value selectors* enable the selection of an element based on the presence of an attribute alone (for example `href`), or on various different matches against the value of the attribute.
+
++++
<table class="standard-table">
  <thead>
    <tr>
      <th scope="col">Selector</th>
      <th scope="col">Example</th>
      <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[<em>attr</em>]</code></td>
      <td><code>a[title]</code></td>
      <td>
        Matches elements with an <em>attr</em> attribute (whose name is the
        value in square brackets).
      </td>
    </tr>
    <tr>
      <td><code>[<em>attr</em>=<em>value</em>]</code></td>
      <td><code>a[href="https://example.com"]</code></td>
      <td>
        Matches elements with an <em>attr</em> attribute whose value is exactly
        <em>value</em> — the string inside the quotes.
      </td>
    </tr>
    <tr>
      <td><code>[<em>attr</em>~=<em>value</em>]</code></td>
      <td><code>p[class~="special"]</code></td>
      <td>
        <p>
          <br />Matches elements with an <em>attr</em> attribute whose value is
          exactly <em>value</em>, or contains <em>value</em> in its (space
          separated) list of values.
        </p>
      </td>
    </tr>
    <tr>
      <td><code>[<em>attr</em>|=<em>value</em>]</code></td>
      <td><code>div[lang|="zh"]</code></td>
      <td>
        Matches elements with an <em>attr</em> attribute whose value is exactly
        <em>value</em> or begins with <em>value</em> immediately followed by a
        hyphen.
      </td>
    </tr>
  </tbody>
</table>
++++

* The *substring matching selectors* allow for more advanced matching of substrings inside the value of a attribute. 
+
[cols="1,1,5"]
|===
| Selector | Example | Description

| `[attr^=value]` | `li[class^="box-"]` | Matches elements with an _attr_ attribute, whose value begins with _value_.

| `[attr$=value]` | `li[class$="-box"]` | Matches elements with an _attr_ attribute whose value ends with _value_.

| `[attr*=value]` | `li[class*="box"]`  | Matches elements with an _attr_ attribute whose value contains _value_ anywhere within the string.
|===
+
[TIP]
====
If you want to match attribute values case-insensitively you can use the value `i` before the closing bracket.

```css
li[class^="a"] {
  background-color: yellow;
}

li[class^="a" i] {
  color: red;
}
```

```html
<h1>Case-insensitivity</h1>
<ul>
  <li class="a">Item 1</li>
  <li class="A">Item 2</li>
  <li class="Ab">Item 3</li>
</ul>
```
====

==== Pseudo-classes and pseudo-elements

* A *pseudo-class* is a selector that selects elements that are in _a specific state_, e.g. they are the first element of their type, or they are being hovered over by the mouse pointer.
+
Pseudo-classes are keywords that start with a colon `:`. For example, both `:first-child` and `:hover` are pseudo-classes.
+
```css
/* target the first paragraph child element in all article. */
article p:first-child {
  font-size: 120%;
  font-weight: bold;
}
```

* It is valid to write pseudo-classes and elements without any element selector preceding them.
+
In the example above, write `:first-child` and the rule would apply to any element that is the first child of an `<article>` element, not just a paragraph first child — `:first-child` is equivalent to `*:first-child`.
+
```css
article :first-child {
  font-size: 120%;
  font-weight: bold;
}
```
+
```css
article *:first-child {
  font-size: 120%;
  font-weight: bold;
}
```

* The *user-action pseudo-classes*, sometimes referred to as *dynamic pseudo-classes*, act as if a class had been added to the element when the user interacts with it.
+
```css
a:link, a:visited {
  color: rebeccapurple;
  font-weight: bold;
}

a:hover {
  color: hotpink;
}
```
+
```html
<p><a href="">Hover over me</a></p>
```
+
[%collapsible]
====
++++
<style>
.user-action-pseudo-classes a:link,
.user-action-pseudo-classes a:visited {
  color: rebeccapurple;
  font-weight: bold;
}

.user-action-pseudo-classes a:hover {
  color: hotpink;
}
</style>

<div class="user-action-pseudo-classes">
<p><a href="">Hover over me</a></p>
</div>
++++
====

* *Pseudo-elements* behave in a similar way. However, they act as if a whole new HTML element is added into the markup, rather than applying a class to existing elements.
+
Pseudo-elements start with a double colon `::`. For example, both the `::fist-line`, and `::before` are pseudo-elements.
+
NOTE: Some early pseudo-elements used the single colon syntax. Modern browsers support the early pseudo-elements with single- or double-colon syntax for backwards compatibility.
+
```css
/* select the first line of a paragraph of an article */
article p::first-line {
  font-size: 120%;
  color: red;
}
```
+
[%collapsible]
====
++++
<style>
article.pseudo-elements p::first-line {
  font-size: 120%;
  color: red;
}
</style>

<article class="pseudo-elements">
  <p>Veggies es bonus vobis, proinde vos postulo essum magis kohlrabi welsh onion daikon amaranth tatsoi tomatillo
            melon azuki bean garlic.</p>

    <p>Gumbo beet greens corn soko endive gumbo gourd. Parsley shallot courgette tatsoi pea sprouts fava bean collard
            greens dandelion okra wakame tomato. Dandelion cucumber earthnut pea peanut soko zucchini.</p>
</article>
++++
====

* Combining pseudo-classes and pseudo-elements
+
```css
/*  make the first line of the first paragraph bold */
article p:first-child::first-line {
  font-size: 120%;
  font-weight: bold;
}
```

* The `::before` and `::after` are a couple of special pseudo-elements, which are used along with the https://developer.mozilla.org/en-US/docs/Web/CSS/content[content] property to insert content into the document using CSS.
+
```css
.topic-weather::before {
  content: '⛅ ';
}

.topic-weather::after {
  content: " ➥";
}

.topic-hot::before {
  content: url('https://interactive-examples.mdn.mozilla.net/media/examples/fire.png');
  margin-right: 6px;
}
```
+
```html
<p class="topic-weather">Weather for Today: Heat, violent storms and twisters</p>
<p class="topic-hot">Trending Article: Must-watch videos of the week</p>
```
+
[%collapsible]
====
++++
<style>
div.eg-before-after
.topic-weather::before {
  content: '⛅ ';
}

div.eg-before-after
.topic-weather::after {
  content: ' ➥';
}

div.eg-before-after
.topic-hot::before {
  content: url('https://interactive-examples.mdn.mozilla.net/media/examples/fire.png');
  margin-right: 6px;
}
</style>

<div class='eg-before-after' />
<p class="topic-weather">Weather for Today: Heat, violent storms and twisters</p>
<p class="topic-hot">Trending Article: Must-watch videos of the week</p>
</div>
++++
====

==== Combinators

* The *descendant combinator* — typically represented by a single space (" ") character — combines two selectors such that elements matched by the second selector are selected if they have an ancestor (parent, parent's parent, parent's parent's parent, etc.) element matching the first selector. Selectors that utilize a descendant combinator are called _descendant selectors_.
+
```css
body article p { /* */ }
```

* The *child combinator* (`>`) is placed between two CSS selectors. It matches only those elements matched by the second selector that are the _direct children_ of elements matched by the first. Descendant elements further down the hierarchy don't match.
+
```css
/* select only <p> elements that are direct children of <article> elements */
article > p { /* */ }
```

* The *next-sibling combinator* (`+`) is placed between two CSS selectors. It matches only those elements matched by the second selector that are the next sibling element of the first selector.
+
```css
/*  select all <img> elements that are immediately preceded by a <p> element */
p + img { /* */ }
```
+
[%collapsible]
====
```css
h1 + p {
  font-weight: bold;
  background-color: #333;
  color: #fff;
  padding: .5em;
}
```

```html
<article>
  <h1>A heading</h1>
  <p>I am a paragraph.</p>
  <div>I am a div</div>
  <p>I am another paragraph.</p>
</article>
```

++++
<style>
.eg-next-sibling-combinator
h1 + p {
  font-weight: bold;
  background-color: #333;
  color: #fff;
  padding: .5em;
}
</style>
<article class="eg-next-sibling-combinator">
  <h1>A heading</h1>
  <p>I am a paragraph.</p>
  <div>I am a div</div>
  <p>I am another paragraph.</p>
</article>
++++
====

* The *subsequent-sibling combinator* (`~`) are used to select siblings of an element even if they are NOT directly adjacent.
+
```css
/* select all <img> elements that come anywhere after <p> elements */
p ~ img { /* */ }
```
+
[%collapsible]
====
```css
h1 ~ p {
  font-weight: bold;
  background-color: #333;
  color: #fff;
  padding: .5em;
}
```

```html
<article>
  <h1>A heading</h1>
  <p>I am a paragraph.</p>
  <div>I am a div</div>
  <p>I am another paragraph.</p>
</article>
```

++++
<style>
.eg-subsequent-sibling-combinator
h1 ~ p {
  font-weight: bold;
  background-color: #333;
  color: #fff;
  padding: .5em;
}
</style>
<article class="eg-subsequent-sibling-combinator">
  <h1>A heading</h1>
  <p>I am a paragraph.</p>
  <div>I am a div</div>
  <p>I am another paragraph.</p>
</article>
++++
====

* CSS Combinators can be used with or without the `&` nesting selector.
+
```css
/* the & nesting selector is not required, but recommended */
p {
  & ~ img {
  }
}
/* This is parsed by the browser as */
p ~ img {
}
```

=== Cascade, specificity, and inheritance

https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade[*Cascade*] is the algorithm that defines how user agents combine property values originating from different sources. It lies at the core of CSS, as emphasized by the name: *Cascading* Style Sheets.

https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity[*Specificity*] is the algorithm used by browsers to determine the CSS declaration that is the most relevant to an element, which in turn, determines the property value to apply to the element.

In CSS, https://developer.mozilla.org/en-US/docs/Web/CSS/Inheritance[*inheritance*] controls what happens when no value is specified for a property on an element. CSS properties can be categorized in two types:

* *inherited properties*, which by default are set to the https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value[computed value] of the parent element
* *non-inherited properties*, which by default are set to https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value[initial value] of the property

/* TODO */

==== Cascade layers

/* TODO */


=== The box model

Everything in CSS has a box around it, and understanding these boxes is key to being able to create more complex layouts with CSS, or to align items with other items.

==== Block and inline boxes

In CSS boxes generally fit into the categories of *block boxes* and *inline boxes*, and have an *inner display* type and an *outer display* type.

If a box has an *outer display* type of `block`, then:

* The box will break onto a new line.
* The `width` and `height` properties are respected.
* Padding, margin and border will cause other elements to be pushed away from the box.
* If `width` is not specified, the box will extend in the inline direction to fill the space available in its container. In most cases, the box will become as wide as its container, filling up 100% of the space available.

Some HTML elements, such as `<h1>` and `<p>`, use block as their outer display type by default.

If a box has an *outer display* type of `inline`, then:

* The box will not break onto a new line.
* The `width` and `height` properties will not apply.
* Top and bottom padding, margins, and borders will apply but will not cause other inline boxes to move away from the box.
* Left and right padding, margins, and borders will apply and will cause other inline boxes to move away from the box.

Some HTML elements, such as `<a>`, `<span>`, `<em>` and `<strong>` use inline as their outer display type by default.

Boxes also have an *inner display* type, which dictates how elements inside that box are laid out, for example by setting `display: flex;`.

==== The CSS box model

The CSS box model as a whole applies to block boxes and defines how the different parts of a box — margin, border, padding, and content — work together to create a box. To add complexity, there is a *standard* and an *alternate* box model. By default, browsers use the standard box model.

image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/box-model.png[Diagram of the box model,45%,45%]

* *Content box*: The area where the content is displayed; size it using properties like `inline-size` and `block-size` or `width` and `height`.

* *Padding box*: The padding sits around the content as white space; size it using `padding` and related properties.

* *Border box*: The border box wraps the content and any padding; size it using `border` and related properties.

* *Margin box*: The margin is the outermost layer, wrapping the content, padding, and border as whitespace between this box and other elements; size it using `margin` and related properties.

===== The standard CSS box model

In the *standard box model*, if set `inline-size` and `block-size` (or `width` and `height`) property values on a box, these values define the `inline-size` and `block-size` (`width` and `height` in horizontal languages) of the *content box*. Any padding and borders are then added to those dimensions to get the total size taken up by the box.

```css
.box {
  width: 350px;
  height: 150px;
  margin: 10px;
  padding: 25px;
  border: 5px solid black;
}
```

.The actual space taken up by the box will be 410px wide (350 + 25 + 25 + 5 + 5) and 210px high (150 + 25 + 25 + 5 + 5).
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/standard-box-model.png["Showing the size of the box when the standard box model is being used.",500px,300px]

TIP: The margin is not counted towards the actual size of the box — sure, it affects the total space that the box will take up on the page, but only the space outside the box. The box's area stops at the border — it does not extend into the margin.

===== The alternative CSS box model

In the alternative box model, any width is the width of the visible box on the page. The content area width is that width minus the width for the padding and border. No need to add up the border and padding to get the real size of the box.

* The `box-sizing` CSS property sets how the total width and height of an element is calculated.
+
```css
/* The width and height properties include the content, padding, and border, but
   do not include the margin. Note that padding and border will be inside of the box.
*/
box-sizing: border-box;

/* The width and height properties include the content, but
   does not include the padding, border, or margin.
*/
box-sizing: content-box;
```

* To turn on the alternative model for an element, set `box-sizing: border-box` on it:
+
```css
.box {
  width: 350px;
  inline-size: 350px;
  height: 150px;
  block-size: 150px;
  margin: 10px;
  padding: 25px;
  border: 5px solid black;
  box-sizing: border-box;
}
```
+
.Now, the actual space taken up by the box will be 350px in the inline direction and 150px in the block direction.
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/alternate-box-model.png["Showing the size of the box when the alternate box model is being used.",440px,240px]

* To use the alternative box model for all of your elements (which is a common choice among developers), set the `box-sizing` property on the `<html>` element and set all other elements to inherit that value:
+
```css
html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}
```

===== The box model and inline boxes

All of the above fully applies to block boxes. Some of the properties can apply to inline boxes too, such as those created by a `<span>` element.

An element with `display: inline-block` does a subset of the block things, NOT, however, break onto a new line.

* The `width` and `height` properties are respected.

* `padding`, `margin`, and `border` will cause other elements to be pushed away from the box.

==== Backgrounds and borders

:CSS-background-color: https://developer.mozilla.org/en-US/docs/Web/CSS/background-color
:CSS-background-image: https://developer.mozilla.org/en-US/docs/Web/CSS/background-image
:CSS-border: https://developer.mozilla.org/en-US/docs/Web/CSS/border
:CSS-background-clip: https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip
:CSS-background-origin: https://developer.mozilla.org/en-US/docs/Web/CSS/background-origin
:CSS-background-repeat: https://developer.mozilla.org/en-US/docs/Web/CSS/background-repeat
:CSS-background-size: https://developer.mozilla.org/en-US/docs/Web/CSS/background-size
:CSS-background-attachment: https://developer.mozilla.org/en-US/docs/Web/CSS/background-attachment

* The {CSS-background-color}[`background-color`] CSS property sets the background color of an element.
+
--
** A `background-color` extends underneath the content and padding box of the element.

** It is rendered behind any {CSS-background-image}[`background-image`] that is specified, although the color will still be visible through any transparency in the image.
--
+
```css
/* Keyword values */
background-color: red;
background-color: indigo;

/* Hexadecimal value */
background-color: #bbff00; /* Fully opaque */
background-color: #bf0; /* Fully opaque shorthand */
background-color: #11ffee00; /* Fully transparent */
background-color: #1fe0; /* Fully transparent shorthand */
background-color: #11ffeeff; /* Fully opaque */
background-color: #1fef; /* Fully opaque shorthand */

/* RGB value */
background-color: rgb(255 255 128); /* Fully opaque */
background-color: rgb(117 190 218 / 50%); /* 50% transparent */

/* HSL value */
background-color: hsl(50 33% 25%); /* Fully opaque */
background-color: hsl(50 33% 25% / 75%); /* 75% opaque, i.e. 25% transparent */

/* Special keyword values */
background-color: currentcolor;
background-color: transparent;
```

* The {CSS-background-image}[`background-image`] CSS property sets one OR more background images on an element.
+
--
** The background images are drawn on stacking context layers on top of each other. The first layer specified is drawn as if it is closest to the user.

** The {CSS-border}[borders] of the element are then drawn on top of them, and the `background-color` is drawn beneath them. How the images are drawn relative to the box and its borders is defined by the {CSS-background-clip}[background-clip] and {CSS-background-origin}[background-origin] CSS properties.

** If a specified image cannot be drawn (for example, when the file denoted by the specified URI cannot be loaded), browsers handle it as they would a `none` value.

** NOTE: Even if the images are opaque and the color won't be displayed in normal circumstances, web developers should always specify a `background-color`. If the images cannot be loaded—for instance, when the network is down—the background color will be used as a fallback.

** To specify multiple background images, supply multiple https://developer.mozilla.org/en-US/docs/Web/CSS/image[`<image>`] values, separated by a comma.
--
+
```css
background-image: linear-gradient(
    to bottom,
    rgb(255 255 0 / 50%),
    rgb(0 0 255 / 50%)
  ), url("catfront.png");

background-image: url("../../media/examples/lizard.png"),
                  url("../../media/examples/star.png");
```

** The {CSS-background-repeat}[`background-repeat`] CSS property sets how background images are repeated. A background image can be repeated along the horizontal and vertical axes, or not repeated at all.
+
```css
/* Keyword values */
background-repeat: repeat-x;
background-repeat: repeat-y;
background-repeat: repeat;
/* repeat as many times as possible, adding space
   between the images if there is extra space available. */
background-repeat: space;
/* similar to space, but stretches the images to fill
   any extra space */
background-repeat: round;
background-repeat: no-repeat;

/* Two-value syntax: horizontal | vertical */
background-repeat: repeat space;
background-repeat: repeat repeat;
background-repeat: round space;
background-repeat: no-repeat round;
```

** The {CSS-background-size}[`background-size`] CSS property sets the size of the element's background image. The image can be left to its natural size, stretched, or constrained to fit the available space. 
+
--
*** Spaces not covered by a background image are filled with the `background-color` property, and the background color will be visible behind background images that have transparency/translucency.

*** To specify the size of multiple background images, separate the value for each one with a comma.
--
+
```css
/* Keyword values */
/* Scales the image (while preserving its ratio) to the smallest possible size
   to fill the container (that is: both its height and width completely cover
   the container), leaving no empty space. If the proportions of the background
   differ from the element, the image is cropped either vertically or horizontally. */
background-size: cover;
/* Scales the image as large as possible within its container without cropping or
   stretching the image. */
background-size: contain;

/* One-value syntax */
/* the width of the image (height becomes 'auto') */
background-size: 50%;
background-size: 3.2em;
background-size: 12px;
background-size: auto;

/* Two-value syntax */
/* first value: width of the image, second value: height */
background-size: 50% auto;
background-size: 3em 25%;
background-size: auto 6px;
background-size: auto auto;

/* Multiple backgrounds */
background-size: auto, auto; /* Not to be confused with `auto auto` */
background-size: 50%, 25%, 25%;
background-size: 6px, auto, contain;
```

** The {CSS-background-origin}[`background-origin`] CSS property sets the background's origin: from the border start, inside the border, or inside the padding.
+
TIP: Note that `background-origin` is ignored when {CSS-background-attachment}[background-attachment] is `fixed`.
+
```css
/* Keyword values */
background-origin: border-box;
background-origin: padding-box; /* initial value */
background-origin: content-box;
```

** The {CSS-background-attachment}[`background-attachment`] CSS property sets whether a background image's position is fixed within the https://developer.mozilla.org/en-US/docs/Glossary/Viewport[viewport], or scrolls with its containing block.
+
```css
/* Keyword values */
background-attachment: scroll;
background-attachment: fixed;
background-attachment: local;
```

** The {CSS-background-position}[`background-position`] CSS property sets the initial position for each background image. The position is relative to the position layer set by `background-origin`.
+
```css
/* Keyword values */
background-position: top;
background-position: bottom;
background-position: left;
background-position: right;
background-position: center;

/* <percentage> values */
background-position: 25% 75%;

/* <length> values */
background-position: 0 0;
background-position: 1cm 2cm;
background-position: 10ch 8em;

/* Multiple images */
background-position:
  0 0,
  center;

/* Edge offsets values */
background-position: bottom 10px right 20px;
background-position: right 3em bottom 10px;
background-position: bottom 10px right;
background-position: top right 10px;
```

=== Handling different text directions

:CSS-writing-mode: https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode

The {CSS-writing-mode}[writing-mode] CSS property sets whether lines of text are laid out horizontally or vertically, as well as the direction in which blocks progress. When set for an entire document, it should be set on the root element (`html` element for HTML documents).

```css
/* For `ltr` scripts, content flows horizontally from left to right.
   For `rtl` scripts, content flows horizontally from right to left.
   The next horizontal line is positioned below the previous line. */
writing-mode: horizontal-tb;
/* For `ltr` scripts, content flows vertically from top to bottom, and the
   next vertical line is positioned to the left of the previous line.
   For `rtl` scripts, content flows vertically from bottom to top, and the
   next vertical line is positioned to the right of the previous line. */
writing-mode: vertical-rl;
/* For `ltr` scripts, content flows vertically from top to bottom, and the
   next vertical line is positioned to the right of the previous line.
   For `rtl` scripts, content flows vertically from bottom to top, and the
   next vertical line is positioned to the left of the previous line. */
writing-mode: vertical-lr;
```

```html
<style>
div.writing-mode {
  writing-mode: vertical-rl;
}
</style>
<div class='writing-mode'>
<p>歸園田居·其三</p>
<p>魏晉·陶淵明</p>
<p>種豆南山下，草盛豆苗稀。</p>
<p>晨興理荒穢，帶月荷鋤歸。</p>
<p>道狹草木長，夕露沾我衣。</p>
<p>衣沾不足惜，但使願無違。</p>
</div>
```

++++
<style>
div.writing-mode {
  writing-mode: vertical-rl;
}
</style>
<div class='writing-mode'>
<p>歸園田居·其三</p>
<p>魏晉·陶淵明</p>
<p>種豆南山下，草盛豆苗稀。</p>
<p>晨興理荒穢，帶月荷鋤歸。</p>
<p>道狹草木長，夕露沾我衣。</p>
<p>衣沾不足惜，但使願無違。</p>
</div>
++++

==== Block vs. inline

The https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_logical_properties_and_values[CSS logical properties and values] module introduces logical properties and values that provide the ability to control layout through logical, rather than physical, direction and dimension mappings.

* The *Block* dimension perpendicular to the flow of text within a line, i.e., the vertical dimension in horizontal writing modes, and the horizontal dimension in vertical writing modes. For standard English text, it is the vertical dimension.

* The *Inline* dimension parallel to the flow of text within a line, i.e., the horizontal dimension in horizontal writing modes, and the vertical dimension in vertical writing modes. For standard English text, it is the horizontal dimension.

Logical properties and values use the abstract terms _block_ and _inline_ to describe the direction in which they flow.

* The https://developer.mozilla.org/en-US/docs/Web/CSS/inline-size[`inline-size`] CSS property defines the horizontal or vertical size of an element's block, depending on its writing mode. It corresponds to either the `width` or the `height` property, depending on the value of `writing-mode`.
+
If the writing mode is vertically oriented, the value of `inline-size` relates to the `height` of the element; otherwise, it relates to the `width` of the element.
+
.Showing the block and inline axis for a horizontal writing mode.
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Handling_different_text_directions/horizontal-tb.png[Showing the block and inline axis for a horizontal writing mode.,35%,35%]

* The https://developer.mozilla.org/en-US/docs/Web/CSS/block-size[`block-size`] CSS property defines the horizontal or vertical size of an element's block, depending on its writing mode. It corresponds to either the `width` or the `height` property, depending on the value of `writing-mode`.
+
If the writing mode is vertically oriented, the value of `block-size` relates to the `width` of the element; otherwise, it relates to the `height` of the element.
+
.Showing the block and inline axis for a vertical writing mode.
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Handling_different_text_directions/vertical.png[Showing the block and inline axis for a vertical writing mode.,25%,25%]

* Properties that accept physical values (`top`, `bottom`, `left`, `right`) now also accept flow-relative logical values (`block-start`, `block-end`, `inline-start`, `inline-end`).

=== Overflowing content

Everything in CSS is a box, and the size can be constrained by assigning values of `width` and `height` (or `inline-size` and `block-size`). Overflow happens when there is too much content to fit in a box.

TIP: Wherever possible, CSS does not hide content and try to avoid data loss. 

==== The overflow property 

The https://developer.mozilla.org/en-US/docs/Web/CSS/overflow[`overflow`] property is specified as one or two `<overflow>` keyword values (default value is `visible`).

```css
/* Overflow content is not clipped and may be visible outside the element's padding box.
   The element box is not a scroll container.
   This is the default value of the overflow property. */
overflow: visible;
/* Overflow content is clipped at the element's padding box.
   There are no scroll bars, and the clipped content is not visible, but the content still exists. */
overflow: hidden;
overflow: clip;
/* Overflow content is clipped at the element's padding box, and
   overflow content can be scrolled into view using scroll bars.
   User agents display scroll bars in both horizontal and
   vertical directions if only one value is set, whether or not
   any content is overflowing or clipped. */
overflow: scroll;
/* Overflow content is clipped at the element's padding box, and
   overflow content can be scrolled into view.
   Unlike scroll, user agents display scroll bars only if
   the content is overflowing and hide scroll bars by default. */
overflow: auto;
overflow: hidden visible;
```

* If only one keyword is specified, both `overflow-x` and `overflow-y` are set to the same value.

* If two keywords are specified, the first value applies to `overflow-x` in the horizontal direction and the second one applies to `overflow-y` in the vertical direction.

==== The overflow-wrap property

The https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap[`overflow-wrap`] property applies to text, setting whether the browser should insert line breaks within an otherwise unbreakable string to prevent text from overflowing its line box.

TIP: The property was originally a nonstandard and unprefixed Microsoft extension called `word-wrap`, and was implemented by most browsers with the same name. It has since been renamed to `overflow-wrap`, with `word-wrap` being an alias.

```css
/* Lines may only break at normal word break points (such as
   a space between two words). */
overflow-wrap: normal;
/* To prevent overflow, an otherwise unbreakable string of
   characters — like a long word or URL — may be broken at any point if
   there are no otherwise-acceptable break points in the line.
   No hyphenation character is inserted at the break point.
   Soft wrap opportunities introduced by the word break are considered when
   calculating min-content intrinsic sizes. */
overflow-wrap: anywhere;
/* The same as the anywhere value, with normally unbreakable words allowed to
   be broken at arbitrary points if there are no otherwise acceptable
   break points in the line, but soft wrap opportunities introduced by the
   word break are NOT considered when calculating min-content intrinsic sizes. */
overflow-wrap: break-word;
```

[%collapsible]
====
```html
<style>
  div.overflow-wrap p {
    width: min-content;
    max-width: 5em;
    background-color: lightblue;
  }

  div.overflow-wrap p.normal {
    overflow-wrap: normal;
  }

  div.overflow-wrap p.break-word {
    overflow-wrap: break-word;
  }

  div.overflow-wrap p.break-word.hyphens {
    overflow-wrap: break-word;
    hyphens: auto;
  }

  div.overflow-wrap p.anywhere {
    overflow-wrap: anywhere;
  }
</style>
<div class="overflow-wrap">
  <p class="overflow-wrap normal">
    Gooooooooogle
  </p>
  <p class="overflow-wrap break-word">
    Gooooooooogle
  </p>
  <p class="overflow-wrap break-word hyphens">
    Goooooo&shy;ooogle <!-- use &shy; to insert a soft hyphen -->
  </p>
  <p class="overflow-wrap anywhere">
    Gooooooooogle
  </p>
</div>
```

++++
<style>
  div.overflow-wrap p {
    width: min-content;
    max-width: 5em;
    background-color: lightblue;
  }

  div.overflow-wrap p.normal {
    overflow-wrap: normal;
  }

  div.overflow-wrap p.break-word {
    overflow-wrap: break-word;
  }

  div.overflow-wrap p.break-word.hyphens {
    overflow-wrap: break-word;
    hyphens: auto;
  }

  div.overflow-wrap p.anywhere {
    overflow-wrap: anywhere;
  }
</style>
<div class="overflow-wrap" lang="en-US">
  <p class="overflow-wrap normal">
    Gooooooooogle
  </p>
  <p class="overflow-wrap break-word">
    Gooooooooogle
  </p>
  <p class="overflow-wrap break-word hyphens">
    Goooooo&shy;ooogle <!-- use &shy; to insert a soft hyphen -->
  </p>
  <p class="overflow-wrap anywhere">
    Gooooooooogle
  </p>
</div>
++++
====

[TIP]
====
The differences between `normal`, `break-word` and `anywhere` are only clear if you are using `width: min-content` on the element containing the text, and you also set a `max-width`.

See also: https://stackoverflow.com/questions/77651244/what-are-soft-wrap-opportunities-introduced-by-the-word-break
====


=== CSS values and units

/* TODO */

=== Sizing items in CSS

/* TODO */

=== Images, media, and form elements

/* TODO */

=== Styling tables

/* TODO */

== CSS layout

CSS page layout techniques are used to take elements contained in a web page and control where they're positioned relative to the following factors: their default position in normal layout flow, the other elements around them, their parent container, and the main viewport/window.

=== Normal Flow

By default, a https://developer.mozilla.org/en-US/docs/Glossary/Block-level_content[block-level element]'s content fills the available inline space of the parent element containing it, growing along the block dimension to accommodate its content. The size of https://developer.mozilla.org/en-US/docs/Glossary/Inline-level_content[inline-level elements] is just the size of their content.

The *normal layout flow* is the system by which elements are placed inside the browser's viewport.

* By default, block-level elements are laid out in the block flow direction, which is based on the parent's writing mode (initial: `horizontal-tb`). Each element will appear on a new line below the last one, with each one separated by whatever margin that's been specified.

* Inline elements don't appear on new lines; instead, they all sit on the same line along with any adjacent (or wrapped) text content as long as there is space for them to do so inside the width of the parent block level element. If there isn't space, then the overflowing content will move down to a new line.

* If two vertically adjacent elements both have a margin set on them and their margins touch, the larger of the two margins remains and the smaller one disappears. This is known as https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_box_model/Mastering_margin_collapsing[margin collapsing].
+
TIP: Collapsing margins is only relevant in the vertical direction.

=== The flex model

* When elements are laid out as flex items, they are laid out along two axes:
+
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox/flex_terms.png["Three flex items in a left-to-right language are laid out side-by-side in a flex container. The main axis — the axis of the flex container in the direction in which the flex items are laid out — is horizontal. The ends of the axis are main-start and main-end and are on the left and right respectively. The cross axis is vertical; perpendicular to the main axis. The cross-start and cross-end are at the top and bottom respectively. The length of the flex item along the main axis, in this case, the width, is called the main size, and the length of the flex item along the cross axis, in this case, the height, is called the cross size.",45%,45%]
+
--
* The *main axis* is the axis running in the direction the flex items are laid out in (for example, as a row across the page, or a column down the page.) The start and end of this axis are called the *main start* and *main end*.

* The *cross axis* is the axis running perpendicular to the direction the flex items are laid out in. The start and end of this axis are called the *cross start* and *cross end*.

* The parent element that has `display: flex` set on it is called the *flex container*.

* The items laid out as flexible boxes inside the flex container are called *flex items*.
--

* Flexbox provides a property called `flex-direction` that specifies which direction the main axis runs (which direction the flexbox children are laid out in). By default this is set to `row`, which causes them to be laid out in a row in the direction the browser's default language works in (left to right, in the case of an English browser).
+
```css
/* The direction text is laid out in a line */
flex-direction: row;

/* Like <row>, but reversed */
flex-direction: row-reverse;

/* The direction in which lines of text are stacked */
flex-direction: column;

/* Like <column>, but reversed */
flex-direction: column-reverse;
```

* The `flex-wrap` CSS property sets whether flex items are forced onto one line or can wrap onto multiple lines. If wrapping is allowed, it sets the direction that lines are stacked.
+
```css
/* The flex items are laid out in a single line which may cause the flex container to overflow. */
flex-wrap: nowrap; /* Default value */

/* The flex items break into multiple lines. */
flex-wrap: wrap;

/* Behaves the same as wrap but cross-start and cross-end are permuted. */
flex-wrap: wrap-reverse;
```

* The `flex-flow` CSS shorthand property specifies the direction of a flex container, as well as its wrapping behavior.
+
```css
/* flex-flow: <'flex-direction'> */
flex-flow: row;
flex-flow: row-reverse;
flex-flow: column;
flex-flow: column-reverse;

/* flex-flow: <'flex-wrap'> */
flex-flow: nowrap;
flex-flow: wrap;
flex-flow: wrap-reverse;

/* flex-flow: <'flex-direction'> and <'flex-wrap'> */
flex-flow: row nowrap;
flex-flow: column wrap;
flex-flow: column-reverse wrap-reverse;
```

* The `flex-basis` CSS property sets the initial main size of a flex item. It sets the size of the content box unless otherwise set with `box-sizing`.
+
TIP: The main size is either width or height of the item which is dependent on the `flex-direction` value.
+
TIP: In case both `flex-basis` (other than `auto`) and `width` (or `height` in case of `flex-direction: column`) are set for an element, `flex-basis` has priority.
+
```css
/* Specify <'width'> */
flex-basis: 10em;
flex-basis: 3px;
flex-basis: 50%;
/* uses the value of the width in horizontal writing mode, and
   the value of the height in vertical writing mode. */
flex-basis: auto;

/* Intrinsic sizing keywords */
flex-basis: max-content;
flex-basis: min-content;
flex-basis: fit-content;

/* Automatically size based on the flex item's content */
flex-basis: content;
```

* The `flex-grow` CSS property sets the flex grow factor, which specifies how much of the flex container's remaining space should be assigned to the flex item's main size. When the flex-container's main size is larger than the combined main sizes of the flex items, the extra space is distributed among the flex items, with each item growth being their growth factor value as a proportion of the sum total of all the container's items' flex grow factors.
+
```css
/* <number> values */
flex-grow: 3;
flex-grow: 0.6;
```

* The `flex` CSS shorthand property sets how a flex item will grow or shrink to fit the space available in its flex container.
+
```css
/* Keyword values */
flex: auto;
flex: initial;
flex: none;

/* One value, unitless number: flex-grow
flex-basis is then equal to 0. */
flex: 2;

/* One value, width/height: flex-basis */
flex: 10em;
flex: 30%;
flex: min-content;

/* Two values: flex-grow | flex-basis */
flex: 1 30px;

/* Two values: flex-grow | flex-shrink */
flex: 2 2;

/* Three values: flex-grow | flex-shrink | flex-basis */
flex: 2 2 10%;
```

* In Flexbox, the CSS `align-items` property controls where the flex items sit on the cross axis.
+
--
** By default, the value is `stretch`, which stretches all flex items to fill the parent in the direction of the cross axis.

** If the parent doesn't have a fixed height in the cross axis direction, then all flex items will become as tall as the tallest flex item.
--
+
```css
align-items: stretch;
align-items: center;
align-items: flex-start;
align-items: flex-end;
```

* The CSS `justify-content` property defines how the browser distributes space between and around content items along the main-axis of a flex container, and the inline axis of a grid container.
+
```css
/* The default value is `flex-start`, which makes all the items sit at the start of the main axis. */
justify-content: flex-start;    /* Pack flex items from the start */
justify-content: flex-end;      /* Pack flex items from the end */
justify-content: space-between; /* Distribute items evenly
                                   The first item is flush with the start,
                                   the last is flush with the end */
justify-content: space-around;  /* Distribute items evenly
                                   Start and end gaps are half the size of the space
                                   between each item */
```

=== Floats

* The `float` CSS property places an element on the left or right side of its container, allowing text and inline elements to wrap around it. The element is removed from the normal flow of the page, though still remaining a part of the flow.
+
```css
/* Keyword values */
float: left;
float: right;
float: none;
float: inline-start;
float: inline-end;
```

* The `clear` CSS property sets whether an element must be moved below (cleared) floating elements that precede it. The `clear` property applies to floating and non-floating elements.
+
** When applied to non-floating blocks, it moves the border edge of the element down until it is below the margin edge of all relevant floats. The non-floated block's top margin collapses.

** Vertical margins between two floated elements on the other hand will not collapse. When applied to floating elements, the margin edge of the bottom element is moved below the margin edge of all relevant floats. This affects the position of later floats, since later floats cannot be positioned higher than earlier ones.

** If an element contains only floated elements, its height collapses to nothing. If you want it to always be able to resize, so that it contains floating elements inside it, set the value of the element's display property to `flow-root`.
+
```css
#container {
  display: flow-root;
}
```

=== Positioning

The `position` CSS property sets how an element is positioned in a document. The `top`, `right`, `bottom`, and `left` properties determine the final location of positioned elements.

```css
position: static;
position: relative;
position: absolute;
position: fixed;
position: sticky;
```

* `position: static;`
+
The element is positioned according to the https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow[Normal Flow] of the document. The `top`, `right`, `bottom`, `left`, and `z-index` properties have no effect. This is the default value.

* `position: relative;`
+
The element is positioned according to the normal flow of the document, and then offset relative to itself based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any other elements; thus, the space given for the element in the page layout is the same as if position were `static`.
+
This value creates a new https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index/Stacking_context[*stacking context*] when the value of `z-index` is not `auto`. Its effect on `table-*-group`, `table-row`, `table-column`, `table-cell`, and `table-caption` elements is undefined.

* `position: absolute;`
+
The element is removed from the normal document flow, and no space is created for the element in the page layout. The element is positioned relative to its closest positioned ancestor (if any) or to the initial https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block[*containing block*]. Its final position is determined by the values of `top`, `right`, `bottom`, and `left`.
+
This value creates a new stacking context when the value of `z-index` is not `auto`. The margins of absolutely positioned boxes do not collapse with other margins.

* `position: fixed;`
+
The element is removed from the normal document flow, and no space is created for the element in the page layout. The element is positioned relative to its *initial containing block*, which is the viewport in the case of visual media. Its final position is determined by the values of `top`, `right`, `bottom`, and `left`.
+
This value always creates a new stacking context. In printed documents, the element is placed in the same position on every page.

* `position: sticky;`
+
The element is positioned according to the normal flow of the document, and then offset relative to its nearest scrolling ancestor and containing block (nearest block-level ancestor), including table-related elements, based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any other elements.
+
This value always creates a new stacking context. Note that a sticky element "sticks" to its nearest ancestor that has a "scrolling mechanism" (created when `overflow` is `hidden`, `scroll`, `auto`, or `overlay`), even if that ancestor isn't the nearest actually scrolling ancestor.

The `z-index` CSS property sets the z-order of a positioned element and its descendants or flex and grid items. Overlapping elements with a larger z-index cover those with a smaller one.

=== Responsive design

Responsive web design (RWD) is a web design approach to make web pages render well on all screen sizes and resolutions while ensuring good usability. It is the way to design for a multi-device web.

/* TODO */

== References

* https://developer.mozilla.org/en-US/docs/Web/CSS

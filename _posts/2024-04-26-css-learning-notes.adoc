= CSS Learning Notes
:page-layout: post
:page-categories: ['css']
:page-tags: ['css']
:page-date: 2024-04-26 14:09:38 +0800
:page-revdate: 2024-04-26 14:09:38 +0800
:toc: preamble
:toclevels: 4
:sectnums:
:sectnumlevels: 4

https://developer.mozilla.org/en-US/docs/Web/CSS[Cascading Style Sheets (CSS)] is a stylesheet language used to describe the presentation of a document written in HTML or XML (including XML dialects such as SVG, MathML or XHTML). CSS describes how elements should be rendered on screen, on paper, in speech, or on other media. 

CSS is among the core languages of the open web and is standardized across Web browsers according to https://www.w3.org/Style/CSS/#specs[W3C specifications].

A CSS rule is a set of declarations including https://developer.mozilla.org/en-US/docs/Glossary/Property/CSS[properties] and values associated with a https://developer.mozilla.org/en-US/docs/Glossary/CSS_Selector[selector].

image::https://www.w3schools.com/css/img_selector.gif["CSS selector", 35%, 35%]

Here is an example that makes every HTML paragraph yellow against a black background:

```css
/* The selector "p" indicates that all paragraphs in the document will be affected by that rule */
p {
  /* The "color" property defines the text color, in this case yellow. */
  color: yellow;

  /* The "background-color" property defines the background color, in this case black. */
  background-color: black;
}
```

== Box Model

Everything in CSS has a box around it, and understanding these boxes is key to being able to create more complex layouts with CSS, or to align items with other items.

=== Block and inline boxes

In CSS boxes generally fit into the categories of *block boxes* and *inline boxes*, and have an *inner display* type and an *outer display* type.

If a box has an *outer display* type of `block`, then:

* The box will break onto a new line.
* The `width` and `height` properties are respected.
* Padding, margin and border will cause other elements to be pushed away from the box.
* If `width` is not specified, the box will extend in the inline direction to fill the space available in its container. In most cases, the box will become as wide as its container, filling up 100% of the space available.

Some HTML elements, such as `<h1>` and `<p>`, use block as their outer display type by default.

If a box has an *outer display* type of `inline`, then:

* The box will not break onto a new line.
* The `width` and `height` properties will not apply.
* Top and bottom padding, margins, and borders will apply but will not cause other inline boxes to move away from the box.
* Left and right padding, margins, and borders will apply and will cause other inline boxes to move away from the box.

Some HTML elements, such as `<a>`, `<span>`, `<em>` and `<strong>` use inline as their outer display type by default.

Boxes also have an *inner display* type, which dictates how elements inside that box are laid out, for example by setting `display: flex;`.

=== The CSS box model

The CSS box model as a whole applies to block boxes and defines how the different parts of a box — margin, border, padding, and content — work together to create a box. To add complexity, there is a *standard* and an *alternate* box model. By default, browsers use the standard box model.

image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/box-model.png[Diagram of the box model,45%,45%]

* *Content box*: The area where the content is displayed; size it using properties like `inline-size` and `block-size` or `width` and `height`.

* *Padding box*: The padding sits around the content as white space; size it using `padding` and related properties.

* *Border box*: The border box wraps the content and any padding; size it using `border` and related properties.

* *Margin box*: The margin is the outermost layer, wrapping the content, padding, and border as whitespace between this box and other elements; size it using `margin` and related properties.

==== The standard CSS box model

In the *standard box model*, if set `inline-size` and `block-size` (or `width` and `height`) property values on a box, these values define the `inline-size` and `block-size` (`width` and `height` in horizontal languages) of the *content box*. Any padding and borders are then added to those dimensions to get the total size taken up by the box.

```css
.box {
  width: 350px;
  height: 150px;
  margin: 10px;
  padding: 25px;
  border: 5px solid black;
}
```

.The actual space taken up by the box will be 410px wide (350 + 25 + 25 + 5 + 5) and 210px high (150 + 25 + 25 + 5 + 5).
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/standard-box-model.png["Showing the size of the box when the standard box model is being used.",500px,300px]

TIP: The margin is not counted towards the actual size of the box — sure, it affects the total space that the box will take up on the page, but only the space outside the box. The box's area stops at the border — it does not extend into the margin.

==== The alternative CSS box model

In the alternative box model, any width is the width of the visible box on the page. The content area width is that width minus the width for the padding and border. No need to add up the border and padding to get the real size of the box.

* The `box-sizing` CSS property sets how the total width and height of an element is calculated.
+
```css
/* The width and height properties include the content, padding, and border, but
   do not include the margin. Note that padding and border will be inside of the box.
*/
box-sizing: border-box;

/* The width and height properties include the content, but
   does not include the padding, border, or margin.
*/
box-sizing: content-box;
```

* To turn on the alternative model for an element, set `box-sizing: border-box` on it:
+
```css
.box {
  width: 350px;
  inline-size: 350px;
  height: 150px;
  block-size: 150px;
  margin: 10px;
  padding: 25px;
  border: 5px solid black;
  box-sizing: border-box;
}
```
+
.Now, the actual space taken up by the box will be 350px in the inline direction and 150px in the block direction.
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model/alternate-box-model.png["Showing the size of the box when the alternate box model is being used.",440px,240px]

* To use the alternative box model for all of your elements (which is a common choice among developers), set the `box-sizing` property on the `<html>` element and set all other elements to inherit that value:
+
```css
html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}
```

==== The box model and inline boxes

All of the above fully applies to block boxes. Some of the properties can apply to inline boxes too, such as those created by a `<span>` element.

An element with `display: inline-block` does a subset of the block things, NOT, however, break onto a new line.

* The `width` and `height` properties are respected.

* `padding`, `margin`, and `border` will cause other elements to be pushed away from the box.

== CSS layout

CSS page layout techniques are used to take elements contained in a web page and control where they're positioned relative to the following factors: their default position in normal layout flow, the other elements around them, their parent container, and the main viewport/window.

=== Normal Flow

By default, a https://developer.mozilla.org/en-US/docs/Glossary/Block-level_content[block-level element]'s content fills the available inline space of the parent element containing it, growing along the block dimension to accommodate its content. The size of https://developer.mozilla.org/en-US/docs/Glossary/Inline-level_content[inline-level elements] is just the size of their content.

The *normal layout flow* is the system by which elements are placed inside the browser's viewport.

* By default, block-level elements are laid out in the block flow direction, which is based on the parent's writing mode (initial: `horizontal-tb`). Each element will appear on a new line below the last one, with each one separated by whatever margin that's been specified.

* Inline elements don't appear on new lines; instead, they all sit on the same line along with any adjacent (or wrapped) text content as long as there is space for them to do so inside the width of the parent block level element. If there isn't space, then the overflowing content will move down to a new line.

* If two vertically adjacent elements both have a margin set on them and their margins touch, the larger of the two margins remains and the smaller one disappears. This is known as https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_box_model/Mastering_margin_collapsing[margin collapsing].
+
TIP: Collapsing margins is only relevant in the vertical direction.

=== The flex model

* When elements are laid out as flex items, they are laid out along two axes:
+
image::https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox/flex_terms.png["Three flex items in a left-to-right language are laid out side-by-side in a flex container. The main axis — the axis of the flex container in the direction in which the flex items are laid out — is horizontal. The ends of the axis are main-start and main-end and are on the left and right respectively. The cross axis is vertical; perpendicular to the main axis. The cross-start and cross-end are at the top and bottom respectively. The length of the flex item along the main axis, in this case, the width, is called the main size, and the length of the flex item along the cross axis, in this case, the height, is called the cross size.",45%,45%]
+
--
* The *main axis* is the axis running in the direction the flex items are laid out in (for example, as a row across the page, or a column down the page.) The start and end of this axis are called the *main start* and *main end*.

* The *cross axis* is the axis running perpendicular to the direction the flex items are laid out in. The start and end of this axis are called the *cross start* and *cross end*.

* The parent element that has `display: flex` set on it is called the *flex container*.

* The items laid out as flexible boxes inside the flex container are called *flex items*.
--

* Flexbox provides a property called `flex-direction` that specifies which direction the main axis runs (which direction the flexbox children are laid out in). By default this is set to `row`, which causes them to be laid out in a row in the direction the browser's default language works in (left to right, in the case of an English browser).
+
```css
/* The direction text is laid out in a line */
flex-direction: row;

/* Like <row>, but reversed */
flex-direction: row-reverse;

/* The direction in which lines of text are stacked */
flex-direction: column;

/* Like <column>, but reversed */
flex-direction: column-reverse;
```

* The `flex-wrap` CSS property sets whether flex items are forced onto one line or can wrap onto multiple lines. If wrapping is allowed, it sets the direction that lines are stacked.
+
```css
/* The flex items are laid out in a single line which may cause the flex container to overflow. */
flex-wrap: nowrap; /* Default value */

/* The flex items break into multiple lines. */
flex-wrap: wrap;

/* Behaves the same as wrap but cross-start and cross-end are permuted. */
flex-wrap: wrap-reverse;
```

* The `flex-flow` CSS shorthand property specifies the direction of a flex container, as well as its wrapping behavior.
+
```css
/* flex-flow: <'flex-direction'> */
flex-flow: row;
flex-flow: row-reverse;
flex-flow: column;
flex-flow: column-reverse;

/* flex-flow: <'flex-wrap'> */
flex-flow: nowrap;
flex-flow: wrap;
flex-flow: wrap-reverse;

/* flex-flow: <'flex-direction'> and <'flex-wrap'> */
flex-flow: row nowrap;
flex-flow: column wrap;
flex-flow: column-reverse wrap-reverse;
```

* The `flex-basis` CSS property sets the initial main size of a flex item. It sets the size of the content box unless otherwise set with `box-sizing`.
+
TIP: The main size is either width or height of the item which is dependent on the `flex-direction` value.
+
TIP: In case both `flex-basis` (other than `auto`) and `width` (or `height` in case of `flex-direction: column`) are set for an element, `flex-basis` has priority.
+
```css
/* Specify <'width'> */
flex-basis: 10em;
flex-basis: 3px;
flex-basis: 50%;
/* uses the value of the width in horizontal writing mode, and
   the value of the height in vertical writing mode. */
flex-basis: auto;

/* Intrinsic sizing keywords */
flex-basis: max-content;
flex-basis: min-content;
flex-basis: fit-content;

/* Automatically size based on the flex item's content */
flex-basis: content;
```

* The `flex-grow` CSS property sets the flex grow factor, which specifies how much of the flex container's remaining space should be assigned to the flex item's main size. When the flex-container's main size is larger than the combined main sizes of the flex items, the extra space is distributed among the flex items, with each item growth being their growth factor value as a proportion of the sum total of all the container's items' flex grow factors.
+
```css
/* <number> values */
flex-grow: 3;
flex-grow: 0.6;
```

* The `flex` CSS shorthand property sets how a flex item will grow or shrink to fit the space available in its flex container.
+
```css
/* Keyword values */
flex: auto;
flex: initial;
flex: none;

/* One value, unitless number: flex-grow
flex-basis is then equal to 0. */
flex: 2;

/* One value, width/height: flex-basis */
flex: 10em;
flex: 30%;
flex: min-content;

/* Two values: flex-grow | flex-basis */
flex: 1 30px;

/* Two values: flex-grow | flex-shrink */
flex: 2 2;

/* Three values: flex-grow | flex-shrink | flex-basis */
flex: 2 2 10%;
```

* In Flexbox, the CSS `align-items` property controls where the flex items sit on the cross axis.
+
--
** By default, the value is `stretch`, which stretches all flex items to fill the parent in the direction of the cross axis.

** If the parent doesn't have a fixed height in the cross axis direction, then all flex items will become as tall as the tallest flex item.
--
+
```css
align-items: stretch;
align-items: center;
align-items: flex-start;
align-items: flex-end;
```

* The CSS `justify-content` property defines how the browser distributes space between and around content items along the main-axis of a flex container, and the inline axis of a grid container.
+
```css
/* The default value is `flex-start`, which makes all the items sit at the start of the main axis. */
justify-content: flex-start;    /* Pack flex items from the start */
justify-content: flex-end;      /* Pack flex items from the end */
justify-content: space-between; /* Distribute items evenly
                                   The first item is flush with the start,
                                   the last is flush with the end */
justify-content: space-around;  /* Distribute items evenly
                                   Start and end gaps are half the size of the space
                                   between each item */
```

=== Floats

* The `float` CSS property places an element on the left or right side of its container, allowing text and inline elements to wrap around it. The element is removed from the normal flow of the page, though still remaining a part of the flow.
+
```css
/* Keyword values */
float: left;
float: right;
float: none;
float: inline-start;
float: inline-end;
```

* The `clear` CSS property sets whether an element must be moved below (cleared) floating elements that precede it. The `clear` property applies to floating and non-floating elements.
+
** When applied to non-floating blocks, it moves the border edge of the element down until it is below the margin edge of all relevant floats. The non-floated block's top margin collapses.

** Vertical margins between two floated elements on the other hand will not collapse. When applied to floating elements, the margin edge of the bottom element is moved below the margin edge of all relevant floats. This affects the position of later floats, since later floats cannot be positioned higher than earlier ones.

** If an element contains only floated elements, its height collapses to nothing. If you want it to always be able to resize, so that it contains floating elements inside it, set the value of the element's display property to `flow-root`.
+
```css
#container {
  display: flow-root;
}
```

=== Positioning

The `position` CSS property sets how an element is positioned in a document. The `top`, `right`, `bottom`, and `left` properties determine the final location of positioned elements.

```css
position: static;
position: relative;
position: absolute;
position: fixed;
position: sticky;
```

* `position: static;`
+
The element is positioned according to the https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow[Normal Flow] of the document. The `top`, `right`, `bottom`, `left`, and `z-index` properties have no effect. This is the default value.

* `position: relative;`
+
The element is positioned according to the normal flow of the document, and then offset relative to itself based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any other elements; thus, the space given for the element in the page layout is the same as if position were `static`.
+
This value creates a new https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index/Stacking_context[*stacking context*] when the value of `z-index` is not `auto`. Its effect on `table-*-group`, `table-row`, `table-column`, `table-cell`, and `table-caption` elements is undefined.

* `position: absolute;`
+
The element is removed from the normal document flow, and no space is created for the element in the page layout. The element is positioned relative to its closest positioned ancestor (if any) or to the initial https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block[*containing block*]. Its final position is determined by the values of `top`, `right`, `bottom`, and `left`.
+
This value creates a new stacking context when the value of `z-index` is not `auto`. The margins of absolutely positioned boxes do not collapse with other margins.

* `position: fixed;`
+
The element is removed from the normal document flow, and no space is created for the element in the page layout. The element is positioned relative to its *initial containing block*, which is the viewport in the case of visual media. Its final position is determined by the values of `top`, `right`, `bottom`, and `left`.
+
This value always creates a new stacking context. In printed documents, the element is placed in the same position on every page.

* `position: sticky;`
+
The element is positioned according to the normal flow of the document, and then offset relative to its nearest scrolling ancestor and containing block (nearest block-level ancestor), including table-related elements, based on the values of `top`, `right`, `bottom`, and `left`. The offset does not affect the position of any other elements.
+
This value always creates a new stacking context. Note that a sticky element "sticks" to its nearest ancestor that has a "scrolling mechanism" (created when `overflow` is `hidden`, `scroll`, `auto`, or `overlay`), even if that ancestor isn't the nearest actually scrolling ancestor.

The `z-index` CSS property sets the z-order of a positioned element and its descendants or flex and grid items. Overlapping elements with a larger z-index cover those with a smaller one.

=== Responsive design

Responsive web design (RWD) is a web design approach to make web pages render well on all screen sizes and resolutions while ensuring good usability. It is the way to design for a multi-device web.

== References

* https://developer.mozilla.org/en-US/docs/Web/CSS

<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>Structures in C Language</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2017/03/01/structures-in-c-language/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?qqbuby" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Structures in C Language</h1>
    
    
    <p class="post-meta"><time datetime="2017-03-01T11:20:55+08:00" itemprop="datePublished">Mar 1, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <ul id="markdown-toc">
  <li><a href="#1-defining-structures" id="markdown-toc-1-defining-structures">1. Defining Structures</a></li>
  <li><a href="#2-declaring-structure-variables" id="markdown-toc-2-declaring-structure-variables">2. Declaring Structure Variables</a>    <ul>
      <li><a href="#21-declaring-structure-variables-at-definition" id="markdown-toc-21-declaring-structure-variables-at-definition">2.1. Declaring Structure Variables at Definition</a></li>
      <li><a href="#22-declaring-structure-variables-after-definition" id="markdown-toc-22-declaring-structure-variables-after-definition">2.2. Declaring Structure Variables After Definition</a></li>
      <li><a href="#23-intializing-structure-members" id="markdown-toc-23-intializing-structure-members">2.3. Intializing Structure Members</a></li>
    </ul>
  </li>
  <li><a href="#3-accessing-structure-members" id="markdown-toc-3-accessing-structure-members">3. Accessing Structure Members</a></li>
  <li><a href="#4-bit-fields" id="markdown-toc-4-bit-fields">4. Bit Fields</a></li>
  <li><a href="#5-size-of-structures" id="markdown-toc-5-size-of-structures">5. Size of Structures</a></li>
  <li><a href="#6-references" id="markdown-toc-6-references">6. References</a></li>
</ul>

<hr />

<p>A structure is a programmer-defined data type made up of variables of other data types (possibly including other structure types).</p>

<h3 id="1-defining-structures">1. Defining Structures</h3>

<p>You define a structure using the <code class="language-plaintext highlighter-rouge">struct</code> keyword followed by the declaration of the structure’s members, enclosed in braces. You declare each member of a structure just as you would normally declare a variable—using the data type followed by one or more variable names separated by commas, and ending with a semicolon. Then end the structure definition with a semicolon after the closing brace.</p>

<p>You should also include a name for the structure in between the <code class="language-plaintext highlighter-rouge">struct</code> keyword and the opening brace. This is optional, but if you leave it out, you can’t refer to that structure data type later on (without a <code class="language-plaintext highlighter-rouge">typedef</code>).</p>

<p>Here is an example of defining a simple structure for holding the X and Y coordinates of a point:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>That defines a structure type named <code class="language-plaintext highlighter-rouge">struct point</code>, which contains two members, <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>, both of which are of type <code class="language-plaintext highlighter-rouge">int</code>.</p>

<p>Structures (and unions) may contain instances of other structures and unions, but of course not themselves. It is possible for a structure or union type to contain a field which is a pointer to the same type.</p>

<h3 id="2-declaring-structure-variables">2. Declaring Structure Variables</h3>

<p>You can declare variables of a structure type when both you initially define the structure and after the definition, provided you gave the structure type a name.</p>

<h4 id="21-declaring-structure-variables-at-definition">2.1. Declaring Structure Variables at Definition</h4>

<p>You can declare variables of a structure type when you define the strucutre type by putting the variable names after the enclosing brace of the structure definition, but before the final semicolon. You can declare more than one such variable by separating the names with commas.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span> <span class="n">first_point</span><span class="p">,</span> <span class="n">second_point</span><span class="p">;</span>
</code></pre></div></div>

<p>That example declares two variable of type <code class="language-plaintext highlighter-rouge">struct point</code>, <code class="language-plaintext highlighter-rouge">first_point</code> and <code class="language-plaintext highlighter-rouge">second_point</code>.</p>

<h4 id="22-declaring-structure-variables-after-definition">2.2. Declaring Structure Variables After Definition</h4>

<p>You can declare variables of a structure type after defining the structure by using the <code class="language-plaintext highlighter-rouge">struct</code> keyword and the name you gave the structure type, followed by one or more variables names separated by commas.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">point</span> <span class="n">first_point</span><span class="p">,</span> <span class="n">second_point</span><span class="p">;</span>
</code></pre></div></div>

<p>That example declares two variable of type <code class="language-plaintext highlighter-rouge">struct point</code>, <code class="language-plaintext highlighter-rouge">first_point</code> and <code class="language-plaintext highlighter-rouge">second_point</code>.</p>

<h4 id="23-intializing-structure-members">2.3. Intializing Structure Members</h4>

<p>You can intialize the members of a structure type to have certain values when you decalre structure variables.</p>

<p>If you do not initialize a structure variable, the effect depends on whether it has static storage or not. If it is, members with integral type are intialized with 0 and pointer members are initialized to NULL; otherwise, the value of the structure’s members is indeterminate.</p>

<p>One way to initialize a structure is to specify the values in a set of braces and separated by commas. Those values are assigned to the structure memebers in the same order that the members are declared in the structure in definition.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">point</span> <span class="n">first_point</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span> <span class="p">};</span>
</code></pre></div></div>

<p>In that example, the <code class="language-plaintext highlighter-rouge">x</code> member of <code class="language-plaintext highlighter-rouge">first_point</code> gets the value 5, and the <code class="language-plaintext highlighter-rouge">y</code> member gets the value 10.</p>

<p>Another way to initialize the members is to specify the name of the member to initialize. This way, you can initialize the members in any order you like, and even leave some of them unintialized. There are two methods that you can use. The first method is available in C99 and as a C89 extension in GCC:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="n">first_point</span> <span class="o">=</span> <span class="p">{</span> <span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span> <span class="p">};</span>
</code></pre></div></div>

<p>You can also omit the period and use a colon instead of ‘=’, though this is a GNU C extension:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">structure</span> <span class="n">point</span> <span class="n">first_point</span> <span class="o">=</span> <span class="p">{</span> <span class="n">y</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">:</span> <span class="mi">5</span> <span class="p">};</span>
</code></pre></div></div>

<p>You can also initialize the structure variable’s members when you declare the variable during the structure definition:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span> <span class="n">first_point</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span> <span class="p">};</span>
</code></pre></div></div>

<p>You can also initialize fewer than all of a structure variable’s members:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">pointy</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">pointy</span> <span class="n">first_pointy</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">5</span> <span class="p">};</span>
</code></pre></div></div>

<p>Here, <code class="language-plaintext highlighter-rouge">x</code> is initialized with 5, <code class="language-plaintext highlighter-rouge">y</code> is initialized with 0, and <code class="language-plaintext highlighter-rouge">p</code> is initialized with NULL. The rule here is that <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">p</code> are initialized just as they would be if they were static variables.</p>

<p>Here is another example that initializes a structure’s members which are structure variables themselves:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rectangle</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">point</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">bottom_right</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rectangle</span> <span class="n">my_rectangle</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span> <span class="p">};</span>
</code></pre></div></div>

<p>That example defines the <code class="language-plaintext highlighter-rouge">rectangle</code> structure to consist of two <code class="language-plaintext highlighter-rouge">point</code> structure variables. Then it declares one variable of type <code class="language-plaintext highlighter-rouge">struct rectangle</code> and initializes its members. Since its members are structure variables, we used an extra set of braces surrounding the members that belong to the <code class="language-plaintext highlighter-rouge">point</code> structure variables. However, those extra braces are not necessary; they just make the code easier to read.</p>

<h3 id="3-accessing-structure-members">3. Accessing Structure Members</h3>

<p>You can access the members of a structure variable using the member access operator. You put the name of the structure variable on the left side of the operator, and the name of the member on the right side.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">point</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">point</span> <span class="n">first_poit</span><span class="p">;</span>

<span class="n">first_point</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">first_point</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<p>You can also access the members of a structure variable which is itself a member of a structure variables.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">rectangle</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">point</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">bottom_right</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rectangle</span> <span class="n">my_rectangle</span><span class="p">;</span>

<span class="n">my_rectangle</span><span class="p">.</span><span class="n">top_left</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">my_rectangle</span><span class="p">.</span><span class="n">top_left</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">my_rectangle</span><span class="p">.</span><span class="n">bottom_right</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">my_rectangle</span><span class="p">.</span><span class="n">bottom_right</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="4-bit-fields">4. Bit Fields</h3>

<p>You can create structures with integer members of nonstandard sizes, called <em>bit fields</em>. You do this by specifying an integer (<code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">char</code>, <code class="language-plaintext highlighter-rouge">long int</code>, etc.) member as usual, and inserting a colon and the member of bits that the member should occupy in between the memeber’s name and the semicolon.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">card</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">suit</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">usigned</span> <span class="kt">int</span> <span class="n">face_value</span> <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>That example defines a structure type with two bit fields, <code class="language-plaintext highlighter-rouge">suit</code> and <code class="language-plaintext highlighter-rouge">face_value</code>, which take up 2 bits and 4 bits, respectively. <code class="language-plaintext highlighter-rouge">suit</code> can hold values from 0 to 3, and <code class="language-plaintext highlighter-rouge">face_value</code> can hold values from 0 to 15. Notice that these bit fields were declared as <code class="language-plaintext highlighter-rouge">unsigned int</code>; had they been signed integers, then theirs would been from -2 to 1, and from -8 to 7, respectively.</p>

<p>More generally, the range of an unsigned bit field of <code class="language-plaintext highlighter-rouge">N</code> bits is from 0 to <em>2^N - 1</em>, and the range of a signed bit field of <code class="language-plaintext highlighter-rouge">N</code> bits is from <em>-(2^N) / 2</em> to <em>((2^N) / 2) - 1</em>.</p>

<p>Bit fields can be specified without a name in order to control which actual bits within the containing unit are used. However, the effect of this is not very portable and it is rarely useful. You can also specify a bit field of size 0, which indicates that subsequent bit fields not further bit fields should be packed into the unit containing the previous bit field. This is likewise not generally useful.</p>

<p>You may not take the address of a bit field with the address operator <code class="language-plaintext highlighter-rouge">&amp;</code>.</p>

<h3 id="5-size-of-structures">5. Size of Structures</h3>

<p>The size of a structure type is equal to the sum of the size of all its members, possibly including padding to cause the structure type to align to a particular type byte boundary. The detail vary depending on your computer platform, but it would not be atypical to see structures padded to align on four- or eight-byte boudaries. This is done in order to speed up memory accesses of instance of the structure type.</p>

<p>As a GNU extension, GCC allows structures with no memebers. Such structures have zero size.</p>

<p>If you wish to explicitly omit padding from your structure types (which may, in turn, decrease the speed of structure memory accesses), then GCC provides multiple methods of turning packing off. The quick and easy method is to use the <code class="language-plaintext highlighter-rouge">-fpack-struct</code> compiler option. For more details on omitting packing, please see the GCC manual which corresponds to your version of the compiler.</p>

<hr />

<h3 id="6-references">6. References</h3>

<ol>
  <li><a href="https://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html#Structures">https://www.gnu.org/software/gnu-c-manual/gnu-c-manual.html</a></li>
</ol>

  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2017/03/01/unions-in-c-language/">&laquo; Unions in C Language</a>
      
    </li>
    <li>
      
      <a href="/2017/03/02/arrays-in-c-language/">Arrays in C Language &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>
